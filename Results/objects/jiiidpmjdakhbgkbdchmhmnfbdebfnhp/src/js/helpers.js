var _this=this,RULERS=RULERS||{};RULERS.helpers={isDevMode:()=>!("update_url"in chrome.runtime.getManifest()),sleep:a=>new Promise(b=>setTimeout(b,a)),elementAtPos:(a,b)=>{let c=document.elementsFromPoint(a+RULERS.settings.rulerWidth,b+RULERS.settings.rulerWidth);if(0==c.length)return;for(;c[0].id.startsWith("RULERS_");)c.shift();c=c[0];let d=(c.currentStyle||window.getComputedStyle(c,"")).display;if(RULERS.settings.onlyBlockElements)for(;d&&"inline"===d;)c=c.parentNode,d=(c.currentStyle||window.getComputedStyle(c,"")).display;return(c.id.startsWith("RULERS_")||RULERS.vars.el.infoPanel.contains(c))&&(c=null,d=null),c||null},correct:a=>Math.round(a-RULERS.settings.rulerWidth)*RULERS.vars.scale-.5,correctSize:a=>a*RULERS.vars.scale,getCssPath:a=>{if(!(a instanceof Element))return;let b=a;const c=[],d=a=>{let b=a.tagName.toLowerCase();return a.id?`#${a.id}`:(a.classList.value&&[...a.classList].forEach(a=>b=`${b}.${a}`),b)};for(c.unshift(d(a));"BODY"!==b.parentElement.tagName&&(b=b.parentElement,c.unshift(d(b)),!b.id););return c.join(" > ")},drawLine:(a,b,c)=>{const{correct:d}=RULERS.helpers;a.beginPath(),a.moveTo(...b.map(a=>d(a))),a.lineTo(...c.map(a=>d(a))),a.closePath()},formatValue:(a,b)=>{if(a){const c=a.replace(/([^0-9\.])+/g,""),d=a.replace(/([0-9\.])+/g,"");return c&&d?b?`${Math.round(c)}<tspan font-size="9">${d}</tspan>`:`${Math.round(c)}<span class="unit">${d}</span>`:a}return a},formatColor:c=>{const d=c.split("(")[0].toLowerCase();let e="";const f=a=>("00"+a.toString(16)).slice(-2);if("rgb"===d||"rgba"===d){const[h,i,g,b]=c.split("(")[1].split(")")[0].split(",").map(a=>parseFloat(a)),a=`#${f(h)}${f(i)}${f(g)}`.toUpperCase();"rgb"===d?e=a:"rgba"===d&&(0===b?e="Transparent":e=`${a} at ${100*b}%`)}else e=c;return RULERS.html.infoPanelColorFormat(c,e)},formatSpacing:a=>{let[b,c,d,e]=a.split(" ");return c||(c=b),d||(d=b),e||(e=c),`
      Top: ${b}<br>
      Right: ${c}<br>
      Bottom: ${d}<br>
      Left: ${e}
      `},css:(a,...b)=>a.map((a,c)=>`${a}${b[c]||""}`).join(""),formatPrice:a=>{if(a){const b=chrome.i18n.getUILanguage(),c=`${b.toLowerCase()}-${a.regionCode.toUpperCase()}`.substring(0,5),d=new Intl.NumberFormat(c,{style:"currency",currency:a.currencyCode,minimumFractionDigits:2});return d.format(a.valueMicros/1e6)}},refresh:()=>{RULERS.helpers.debounce(()=>{RULERS.overlay.initCanvas(),RULERS.inject.styleSheet(),RULERS.rulers.init(),RULERS.overlay.init(),RULERS.drawRulers.draw()},"refresh")},debounce:(a,b)=>{RULERS.vars.debouncers[b]?(clearTimeout(RULERS.vars.debouncers[b]),RULERS.vars.debouncers[b]=null,RULERS.vars.debouncers[b]=setTimeout(()=>{clearTimeout(RULERS.vars.debouncers[b]),RULERS.vars.debouncers[b]=null,a()},100)):(a(),RULERS.vars.debouncers[b]=setTimeout(()=>{clearTimeout(RULERS.vars.debouncers[b]),RULERS.vars.debouncers[b]=null},100))},lockScrolling:()=>{document.getElementsByTagName("HTML")[0].classList.add("RULERS__no-scroll"),document.getElementsByTagName("BODY")[0].classList.add("RULERS__no-scroll"),window.scrollTo(0,0)},unlockScrolling:()=>{document.getElementsByTagName("HTML")[0].classList.remove("RULERS__no-scroll"),document.getElementsByTagName("BODY")[0].classList.remove("RULERS__no-scroll")},consoleCanvas:(a,b=1)=>{const c=a.canvas.toDataURL();var d=new Image;d.onload=()=>{const a=_this.height*b,c=_this.width*b},d.src=c}};