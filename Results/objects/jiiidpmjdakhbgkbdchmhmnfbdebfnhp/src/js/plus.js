var RULERS=RULERS||{};RULERS.plus={isPlus:(a,b)=>a||null===RULERS.vars.isPlus?void RULERS.store.get(["plus"],({plus:a})=>{a&&(RULERS.vars.isPlus=a),RULERS.plus.refreshPlus(),!navigator.onLine&&Date.now()-a.lastCheck>7*RULERS.vars.milisecondsPerDay?(RULERS.store.set({plus:!1}),RULERS.vars.isPlus=!1):navigator.onLine&&chrome.runtime.sendMessage({type:"checkStatus",href:b?window.location.href:null,title:b?document.title:null},(a,b)=>{!a&&RULERS.vars.isPlus&&(RULERS.vars.isPlus=a,RULERS.store.set({plus:a}),RULERS.modal.open({html:RULERS.html.warningModal(chrome.i18n.getMessage("modal_license_invalid_title"),chrome.i18n.getMessage("modal_license_invalid_body")),emoji:"warning",buttons:[{value:chrome.i18n.getMessage("modal_close"),action:RULERS.modal.close,icon:"arrow"}]})),a&&!RULERS.vars.isPlus&&(RULERS.store.set({plus:a}),RULERS.vars.isPlus=a,RULERS.modal.open({html:RULERS.html.warningModal(chrome.i18n.getMessage("modal_license_activated_title"),chrome.i18n.getMessage("modal_license_activated_body")),emoji:"tada",buttons:[{value:chrome.i18n.getMessage("modal_close"),action:RULERS.modal.close,icon:"arrow"}]})),RULERS.store.set({plus:a,expireDate:b}),RULERS.vars.isPlus=a,RULERS.vars.plusUntil=b,RULERS.plus.refreshPlus()})}):RULERS.vars.isPlus,buy:()=>{RULERS.modal.close(),chrome.runtime.sendMessage({type:"getCheckoutFlow"},a=>{"windowClosed"===a?RULERS.plus.retryModal():"paymentSucceeded"===a?RULERS.plus.isPlus(!0):void 0})},retryModal:()=>{RULERS.modal.open({html:RULERS.html.warningModal(chrome.i18n.getMessage("modal_purchase_canceled_title"),chrome.i18n.getMessage("modal_purchase_canceled_body")),emoji:"warning",buttons:[{value:chrome.i18n.getMessage("modal_close"),action:RULERS.modal.close},{value:chrome.i18n.getMessage("general_try_again"),action:RULERS.plus.buy,icon:"arrow"}]})},refreshPlus:()=>{RULERS.vars.isPlus?(RULERS.vars.el.leftCorner.setAttribute("class",""),RULERS.vars.el.leftCorner.innerHTML=`<img src="${chrome.runtime.getURL("img/icons/grid.svg")}"/>`,RULERS.vars.el.rightCorner.setAttribute("class",""),RULERS.vars.el.topRuler.setAttribute("class","")):(RULERS.grid.disable(),RULERS.design.delete(),RULERS.vars.el.leftCorner.setAttribute("class","get-plus"),RULERS.vars.el.leftCorner.innerHTML=`<img src="${chrome.runtime.getURL("img/icons/star.svg")}"/>`,RULERS.vars.el.rightCorner.setAttribute("class","hidden"),RULERS.vars.el.topRuler.setAttribute("class","no-right-corner")),window.dispatchEvent(new Event("resize"))},triggerModal:()=>{if(RULERS.vars.isPlus)return;RULERS.modal.open({html:RULERS.html.plusModal(RULERS.vars.price),classes:"plus RULERS__modal--agressive"});const a=RULERS.vars.el.modal.querySelector(".RULERS_button_cta");a.addEventListener("click",()=>{RULERS.plus.buy(),RULERS.modal.close()});const b=RULERS.vars.el.modal.querySelector(".RULERS_button_secondary");b.addEventListener("click",()=>{RULERS.modal.close()});const c=RULERS.vars.el.modal.querySelector("#RULERS_slideshow");c.addEventListener("click",a=>{const b=[...c.querySelectorAll(".slide")],d=b.indexOf(a.target);1===d&&c.prepend(b[b.length-1]),3===d&&c.append(b[0])})}};