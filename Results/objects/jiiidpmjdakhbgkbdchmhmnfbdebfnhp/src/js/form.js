RULERS=RULERS||{},RULERS.form={connectFields:()=>{const a=RULERS.vars.el.modal,b=[...a.querySelectorAll(`[class^="${"js_RULERS__form__"}"]`)];b.forEach(a=>{const b=a.className.split(" ").find(a=>a.includes("js_RULERS__form__")).replace("js_RULERS__form__",""),c=a.dataset&&a.dataset.onchange&&a.dataset.onchange.split("."),d=c&&RULERS[c[0]][c[1]];RULERS.form.types[b]&&RULERS.form.types[b]({container:a,onChange:d})})},types:{file:({container:a,onChange:b})=>{const c=a.querySelector("input.js_RULERS__form__input"),d=a.querySelector(".RULERS__form__field-input"),e=a.querySelector(".RULERS__form__field-button"),f=a.querySelector(".RULERS__form__field-button__icon"),g=a.querySelector(".js_RULERS_design_upload_text"),h=a.querySelector(".js_RULERS_design_upload_image"),i=g.dataset.placeholder,j=(b,d)=>{g.innerHTML=b||i,h.src=d||"",c.setAttribute("value",d),a.classList.remove("loading"),d?(h.classList.remove("RULERS__hidden"),f.src=f.dataset.delete):(h.classList.add("RULERS__hidden"),f.src=f.dataset.upload)};b&&c.addEventListener("change",a=>b(a,j));const k=b=>{if(b.target!==c&&document.createEvent){var d=document.createEvent("MouseEvents");d.initEvent("click",!0,!1),c.dispatchEvent(d)}else document.createEventObject?c.fireEvent("onclick"):"function"==typeof c.onclick&&c.onclick();a.classList.add("loading"),g.innerHTML="Processing image..."};d.addEventListener("click",k),e.addEventListener("click",a=>{c.getAttribute("value")?(b(null,j),c.setAttribute("value","")):k(a)})},text:({container:a,onChange:b})=>{const c=a.querySelector("input.js_RULERS__form__input");c.addEventListener("change",b),c.addEventListener("wheel",b)},options:({container:a,onChange:b})=>{const c=a.querySelector(".RULERS__form__field-options"),d=[...a.querySelectorAll(".RULERS__form__field-option")];c.addEventListener("click",c=>{if("BUTTON"!==c.target.nodeName)return;const e=c.target.dataset.value;d.forEach(c=>{const d=c.dataset.value;d===e?(c.classList.add("active"),b(e,a)):c.classList.remove("active")})})},toggle:({container:a,onChange:b})=>{const c=a.querySelector("input.js_RULERS__form__input"),d=a.querySelector(".RULERS__form__field__toggle__value-on"),e=a.querySelector(".RULERS__form__field__toggle__value-off"),f=a.querySelector(".RULERS__form__field-image-check");a.addEventListener("click",()=>{c.checked=!c.checked,c.checked?(d.classList.remove("RULERS__hidden"),e.classList.add("RULERS__hidden"),f.classList.remove("RULERS__hidden")):(d.classList.add("RULERS__hidden"),e.classList.remove("RULERS__hidden"),f.classList.add("RULERS__hidden")),b(c.checked,a)})},closeBtn:({container:a})=>{a.addEventListener("click",()=>{RULERS.modal.close()})}}};