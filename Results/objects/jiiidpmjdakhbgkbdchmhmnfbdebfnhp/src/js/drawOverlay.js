var RULERS=RULERS||{};RULERS.drawOverlay={clear:({ctx:a,canvas:b})=>{const{correctSize:c}=RULERS.helpers;b||(b=a.canvas);const{width:d,height:e}=b;a.clearRect(0,0,c(d),c(e))},distanceArrow:({ctx:a,from:b,to:c,label:d,color:e})=>{const{correct:f}=RULERS.helpers,g=Math.atan2(c.y-b.y,c.x-b.x),h=Math.round(Math.sqrt(Math.pow(b.x-c.x,2)+Math.pow(b.y-c.y,2)));let i=0,j=0;h&&(a.save(),a.strokeStyle=e,a.globalAlpha=1,a.beginPath(),a.moveTo(f(b.x),f(b.y)),a.lineTo(f(c.x),f(c.y)),a.moveTo(f(b.x),f(b.y)),a.lineTo(f(b.x+5*Math.cos(g-Math.PI/4)),f(b.y+5*Math.sin(g-Math.PI/4))),a.moveTo(f(b.x),f(b.y)),a.lineTo(f(b.x+5*Math.cos(g+Math.PI/4)),f(b.y+5*Math.sin(g+Math.PI/4))),a.moveTo(f(c.x),f(c.y)),a.lineTo(f(c.x-5*Math.cos(g-Math.PI/4)),f(c.y-5*Math.sin(g-Math.PI/4))),a.moveTo(f(c.x),f(c.y)),a.lineTo(f(c.x-5*Math.cos(g+Math.PI/4)),f(c.y-5*Math.sin(g+Math.PI/4))),a.closePath(),a.stroke(),a.restore(),b.x===c.x&&30>Math.abs(b.y-c.y)&&(i=30),b.y===c.y&&50>Math.abs(b.x-c.x)&&(j=20),d&&h&&RULERS.drawOverlay.label({ctx:a,text:`${h} px`,x:(b.x+c.x)/2-i,y:(b.y+c.y)/2-j,font:"Varela Round",size:12,align:"center",color:e}))},label:({whiteBackground:a,ctx:b,text:c,x:d,y:e,font:f,size:g,align:h,color:i,rotated:j})=>{const{correct:k,correctSize:l}=RULERS.helpers,{rulerWidth:m}=RULERS.settings;d<=m+5?j?d=35:(d=30,h="left"):d>RULERS.vars.el.container.innerWidth&&(j?d=RULERS.vars.el.container.innerWidth-35:(d=RULERS.vars.el.container.innerWidth-30,h="right")),e<=m+5&&(e=35),b.save(),b.font=`${l(g)}px ${f}`,b.textAlign=h,b.textBaseline="middle";const n=b.measureText(c).width;let o=0,p=k(e-g/2-3);"right"===h?o=k(d-n/RULERS.vars.scale-4):"center"===h?o=k(d-n/(2*RULERS.vars.scale)-4):"left"==h&&(o=k(d-4));const q=n+l(8),r=l(g+6);if(j){const a=o+q/2,c=p+r/2;b.translate(a,c),b.rotate(-90*(Math.PI/180)),b.translate(-a,-c)}RULERS.drawOverlay.roundRect(b,o,p,q,r,4,a?"#ffffff":i),b.strokeStyle=i,b.stroke(),b.fillStyle=a?i:"#ffffff",b.fillText(c,k(d),k(e)),b.restore()},cornerDot:({ctx:a,x:b,y:c,color:d})=>{const{correct:e,correctSize:f}=RULERS.helpers;a.save(),a.strokeStyle=d,a.fillStyle="#ffffff",a.beginPath(),a.arc(e(b),e(c),f(2),0,2*Math.PI),a.closePath(),a.fill(),a.stroke(),a.restore()},element:({ctx:a,canvas:b,el:c})=>{const{selectedEl:d,hoveredEl:e}=RULERS.vars;b||(b=a.canvas);const{correct:f,correctSize:g}=RULERS.helpers,{height:h,width:i}=b;let j=c.getBoundingClientRect();const k=RULERS.themes.current[c===d?d===e?"selectedAndHoveredEl":"selectedEl":"hoveredEl"];a.save(),a.strokeStyle=k,a.fillStyle=k,a.setLineDash([]),a.beginPath(),a.rect(f(j.left),f(j.top),g(j.width),g(j.height)),a.closePath(),a.globalAlpha=1,a.stroke(),a.restore();const l=()=>{Math.round(j.height)&&RULERS.drawOverlay.label({ctx:a,text:`${Math.round(j.height)} px`,x:50>j.height?j.left-5:j.left,y:j.top+j.height/2,font:"Varela Round",size:12,rotated:50<j.height,align:50>j.height?"right":"center",notResponsive:!0,whiteBackground:!0,color:k}),Math.round(j.width)&&RULERS.drawOverlay.label({ctx:a,text:`${Math.round(j.width)} px`,x:j.left+j.width/2,y:50>j.width?j.top-RULERS.settings.rulerWidth:j.top,font:"Varela Round",size:12,align:"center",rotated:50>j.width,notResponsive:!0,whiteBackground:!0,color:k})};if(c===d){if(d===e){a.save(),a.globalAlpha=1,a.strokeStyle=k,a.setLineDash([g(2),g(5)]),a.moveTo(0,f(j.top+j.height/2)),a.lineTo(f(j.left),f(j.top+j.height/2)),a.moveTo(f(j.right),f(j.top+j.height/2)),a.lineTo(i,f(j.top+j.height/2)),a.moveTo(f(j.left+j.width/2),0),a.lineTo(f(j.left+j.width/2),f(j.top)),a.stroke(),a.restore();const b=Math.round(j.left-RULERS.settings.rulerWidth+RULERS.vars.scrollPos.x);b&&RULERS.drawOverlay.label({ctx:a,text:`${b} px`,x:(j.left+RULERS.settings.rulerWidth)/2,y:j.top+j.height/2,font:"Varela Round",size:12,align:"center",color:k});const c=Math.round(j.top-RULERS.settings.rulerWidth+RULERS.vars.scrollPos.y);c&&RULERS.drawOverlay.label({ctx:a,text:`${c} px`,x:j.left+j.width/2,y:(j.top+RULERS.settings.rulerWidth)/2,font:"Varela Round",size:12,align:"center",color:k}),RULERS.drawOverlay.label({ctx:a,text:`${Math.round(RULERS.vars.el.overlay.width/RULERS.vars.scale-(j.right-RULERS.settings.rulerWidth))} px`,x:RULERS.vars.el.overlay.width/RULERS.vars.scale-(RULERS.vars.el.overlay.width/RULERS.vars.scale-(j.right-RULERS.settings.rulerWidth))/2+RULERS.settings.rulerWidth,y:j.top+j.height/2,font:"Varela Round",size:12,align:"center",color:k})}else a.save(),a.strokeStyle=k,a.setLineDash([g(2),g(5)]),a.globalAlpha=1,a.moveTo(0,f(j.top)),a.lineTo(f(j.left),f(j.top)),a.moveTo(0,f(j.top+j.height)),a.lineTo(f(j.left),f(j.top+j.height)),a.moveTo(f(j.right),f(j.top)),a.lineTo(i,f(j.top)),a.moveTo(f(j.right),f(j.top+j.height)),a.lineTo(i,f(j.top+j.height)),a.moveTo(f(j.left),0),a.lineTo(f(j.left),f(j.top)),a.moveTo(f(j.left+j.width),0),a.lineTo(f(j.left+j.width),f(j.top)),a.moveTo(f(j.left),f(j.bottom)),a.lineTo(f(j.left),h),a.moveTo(f(j.left+j.width),f(j.bottom)),a.lineTo(f(j.left+j.width),h),a.stroke(),a.restore(),l();RULERS.drawOverlay.cornerDot({ctx:a,x:j.right,y:j.top,color:k}),RULERS.drawOverlay.cornerDot({ctx:a,x:j.left,y:j.top,color:k}),RULERS.drawOverlay.cornerDot({ctx:a,x:j.right,y:j.bottom,color:k}),RULERS.drawOverlay.cornerDot({ctx:a,x:j.left,y:j.bottom,color:k})}else l(),RULERS.drawOverlay.cornerDot({ctx:a,x:j.right,y:j.top,color:k}),RULERS.drawOverlay.cornerDot({ctx:a,x:j.left,y:j.top,color:k}),RULERS.drawOverlay.cornerDot({ctx:a,x:j.right,y:j.bottom,color:k}),RULERS.drawOverlay.cornerDot({ctx:a,x:j.left,y:j.bottom,color:k})},overlay:({ctx:a,canvas:b})=>{b||(b=a.canvas);const{selectedEl:c,hoveredEl:d}=RULERS.vars,{correct:e,correctSize:f}=RULERS.helpers;a.save(),a.globalAlpha=RULERS.themes.current.overlayAlpha,a.strokeStyle=RULERS.themes.current.overlay,a.beginPath(),a.rect(0,0,b.width,b.height),a.closePath(),a.fill();const g=b=>{const c=b.getBoundingClientRect();a.beginPath(),a.clearRect(e(c.left),e(c.top),f(c.width),f(c.height)),a.closePath()};c&&g(c),d&&g(d),a.restore()},guides:({ctx:a,canvas:b,showTmpGuide:c})=>{b||(b=a.canvas);const{selectedEl:d,hoveredEl:e,guides:f,mousePos:g,scrollPos:h}=RULERS.vars,{correctSize:j}=RULERS.helpers,{rulerWidth:k}=RULERS.settings,{guide:l}=RULERS.themes.current,{height:m,width:n}=b,o=d&&d.getBoundingClientRect();if(RULERS.drawOverlay.overlay({ctx:a,canvas:b}),e&&d!==e&&RULERS.drawOverlay.element({el:e,ctx:a,canvas:b}),d&&RULERS.drawOverlay.element({el:d,ctx:a,canvas:b}),0>g.x&&c){let b;b=o&&3>=Math.abs(o.top-k-g.y)?o.top-k:o&&3>=Math.abs(o.bottom-k-g.y)?o.bottom-k:g.y,a.save(),a.strokeStyle=l,a.beginPath(),a.globalAlpha=.5,a.moveTo(0,j(b)),a.lineTo(n,j(b)),a.stroke(),a.restore()}if(0>g.y&&c){let b;b=o&&3>=Math.abs(o.left-k-g.x)?o.left-k:o&&3>=Math.abs(o.right-k-g.x)?o.right-k:g.x,a.save(),a.strokeStyle=l,a.beginPath(),a.globalAlpha=.5,a.moveTo(j(b),0),a.lineTo(j(b),m),a.stroke(),a.restore()}if(f&&f.length)for(var p=0;p<f.length;p++){const b="v"===f[p].direction;a.save(),a.beginPath(),a.strokeStyle=l;const c=b?j(f[p].position)-j(h.x):0,d=b?j(f[p].position)-j(h.x):n,e=b?0:j(f[p].position)-j(h.y),g=b?n:j(f[p].position)-j(h.y);a.moveTo(c,e),a.lineTo(d,g),a.stroke(),a.restore()}},roundRect:(a,b,c,d,e,f,g,h)=>{if(a.save(),f||(f=5),"number"==typeof f)f={tl:f,tr:f,br:f,bl:f};else{var i={tl:0,tr:0,br:0,bl:0};for(var j in i)f[j]=f[j]||i[j]}a.beginPath(),a.moveTo(b+f.tl,c),a.lineTo(b+d-f.tr,c),a.quadraticCurveTo(b+d,c,b+d,c+f.tr),a.lineTo(b+d,c+e-f.br),a.quadraticCurveTo(b+d,c+e,b+d-f.br,c+e),a.lineTo(b+f.bl,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f.bl),a.lineTo(b,c+f.tl),a.quadraticCurveTo(b,c,b+f.tl,c),a.closePath(),g&&(a.fillStyle=g,a.fill()),h&&(a.strokeStyle=h,a.stroke()),a.restore()}};