import{registerUser}from"./registerUser.js";import apiUrl from"../helpers/apiUrl.js";import debugDetails from"../helpers/debugDetails.js";import getUserData from"../helpers/getUserData.js";const secret_part_1="V2lsbF9lbG",secret_part_3="=B3ICE43djVUucxw",secret_part_4="i_uwE";export const checkStatus=(a,b,c)=>{getUserData(({id:b})=>{fetch(`${apiUrl}/api/status`,{headers:{Accept:"application/json","Content-Type":"application/json",userid:b},body:JSON.stringify({title:a.title||null,href:a.href||null,debugDetails}),method:"POST"}).then(a=>a.json()).then(a=>{if(a.error)return registerUser(),void c(!1);const b=atob(`${secret_part_1}xhcH${"NlX2F0Xw=="}`),d=a.uuid&&atob(a.uuid.replace(secret_part_4,"").replace(secret_part_3,""));return a.user_has_plus&&a.uuid&&d.includes(b)?void c(!!a.user_has_plus,new Date(d.replace(b,""))):void c(!1)})})};