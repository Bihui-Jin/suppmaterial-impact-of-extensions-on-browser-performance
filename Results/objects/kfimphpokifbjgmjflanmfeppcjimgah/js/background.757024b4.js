(function(e){function t(t){for(var n,s,u=t[0],i=t[1],c=t[2],d=0,f=[];d<u.length;d++)s=u[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,u=1;u<r.length;u++){var i=r[u];0!==o[i]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={background:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=i;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("fe77")},"3fea":function(e,t,r){r("4160"),r("b64b"),r("159b");var n=r("9845");n.runtime.onInstalled.addListener((function(e){var t={display_mode:localStorage["display_mode"]||"extended",show_unread_counter:localStorage["show_unread_counter"]||"1",show_tree:localStorage["show_tree"]||"1",original_fav:localStorage["original_fav"]||"1",detect_rss_feed:localStorage["detect_rss_feed"]||"0",rss_preview:localStorage["rss_preview"]||"0",base_url:"https://www.inoreader.com/"};if(localStorage.removeItem("display_mode"),localStorage.removeItem("show_unread_counter"),localStorage.removeItem("show_tree"),localStorage.removeItem("original_fav"),localStorage.removeItem("detect_rss_feed"),localStorage.removeItem("rss_preview"),n.storage.local.get(Object.keys(t)).then((function(e){Object.keys(e).forEach((function(r){return t[r]=e[r]||t[r]})),n.storage.local.set(t)})),"install"===e.reason){var r=t.base_url+"rss-reader-extension/?utm_source=rss_reader_extension&utm_medium=extension&utm_campaign=extension_install&reason="+e.reason;n.tabs.create({url:r})}}))},"5fb0":function(e,t,r){"use strict";r.d(t,"f",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return n})),r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return i}));var n={none:0,error:1,info:2},o=u?n.info:n.none,a={permissions:["tabs"],origins:["http://*/*","https://*/*"]},s={NAVIGATE_EXTENSION:"navigateExtension",NAVIGATE_INOREADER:"navigateInoreader",SERVER_REFRESH:"serverRefresh"},u=!1,i=[{url:"https://www.inoreader.com/",label:"www.inoreader.com"},{url:"https://us.inoreader.com/",label:"us.inoreader.com (US mirror)"},{url:"https://jp.inoreader.com/",label:"jp.inoreader.com (Japan mirror)"}]},fe77:function(e,t,r){"use strict";r.r(t),r.d(t,"getSubscriptions",(function(){return S})),r.d(t,"getStreamPrefs",(function(){return y})),r.d(t,"getTagList",(function(){return E})),r.d(t,"getUnreadCount",(function(){return R})),r.d(t,"getUserInfo",(function(){return A})),r.d(t,"getFeedInfo",(function(){return T})),r.d(t,"book_page",(function(){return j})),r.d(t,"webpage_tags",(function(){return k})),r.d(t,"addFeed",(function(){return O})),r.d(t,"navigateInoreader",(function(){return U})),r.d(t,"findTab",(function(){return L})),r.d(t,"runInoreaderScript",(function(){return F})),r.d(t,"feedPreview",(function(){return P})),r.d(t,"get_server_data",(function(){return V}));r("7db0"),r("a15b"),r("d3b7"),r("2ca0");var n=r("b85c"),o=(r("96cf"),r("1da1")),a=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("5fb0")),s=(r("caad"),r("9845")),u=r("6612"),i=0,c=["feeds","authorized","counters","fetch_error"];function l(){return d.apply(this,arguments)}function d(){return d=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.storage.local.get(c);case 2:return t=e.sent,e.next=5,s.storage.local.get(["rss_preview","detect_rss_feed","display_mode","badge_type"]);case 5:if(r=e.sent,n=Array.isArray(t.feeds)&&t.feeds.length>0,o=n&&"1"===r.detect_rss_feed&&"extended"===r.display_mode?"_feed_detected":"",!0!==t.authorized&&(o+="_no_user"),s.browserAction.setIcon({path:{16:"icons/16_x_16_pixels"+o+".png",32:"icons/32_x_32_pixels"+o+".png",48:"icons/48_x_48_pixels"+o+".png",128:"icons/128_x_128_pixels"+o+".png"}}),"3"!==r.badge_type){e.next=13;break}return s.browserAction.setBadgeText({text:""}),e.abrupt("return",!0);case 13:t.counters&&t.authorized&&parseInt(t.counters.lastUpdate)>i?(i=parseInt(t.counters.lastUpdate),a=2===r.badge_type?parseInt(t.counters.unseen_cnt):parseInt(t.counters.unread_cnt),t.counters.max_cnt>1e3?a>=9999&&(a=u(a).format("0a")):a>=1e3&&(a="999+"),0!==a?s.browserAction.setBadgeText({text:a+""||""}):s.browserAction.setBadgeText({text:""}),2==r.badge_type?s.browserAction.setTitle({title:"You have "+t.counters.unread_cnt+" unseen articles in Inoreader"}):s.browserAction.setTitle({title:"You have "+t.counters.unread_cnt+" unread articles in Inoreader"})):t.authorized||s.browserAction.setBadgeText({text:""});case 14:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}s.storage.onChanged.addListener((function(e,t){for(var r in a["c"]>=a["d"].info&&console.log("changes:",e),e){var n=e[r];["authorized","feeds","fetch_error","badge_type"].includes(r)&&l(),"counters"===r&&(l(),n.newValue&&1===n.newValue.logged_in&&s.storage.local.set({authorized:!0})),"base_url"===r&&(a["c"]>=a["d"].info&&console.warn("changing base_url",n),V())}})),l();var f=l,p=(r("3fea"),r("25f0"),r("1e0f"),r("9845"));function g(){p.permissions.contains(a["f"]).then((function(e){e&&(p.contentScripts.register({js:[{file:"sniff_common.js"},{file:"doc_start.js"}],matches:["http://*/*","https://*/*"],runAt:"document_start"}),p.contentScripts.register({js:[{file:"sniff_common.js"},{file:"feed_finder.js"}],matches:["http://*/*","https://*/*"]}),p.tabs.onActivated.addListener((function(e){p.storage.local.get(e.tabId.toString()).then((function(t){t[e.tabId]?p.storage.local.set({feeds:t[e.tabId]}):(p.storage.local.set({feeds:[]}),f())}))})))}))}p.permissions.onAdded.addListener((function(e){g()})),p.tabs.onRemoved.addListener((function(e){p.storage.local.remove(e.toString())})),g();var _=r("9845"),b="1000001524",h="uxILTlPQilTphfcf4xwBEspL_0EDaUZL",m="?AppId="+b+"&AppKey="+h,v={SUBSCRIPTION_LIST:"reader/api/0/subscription/list"+m+"&fs=32",STREAM_LIST:"reader/api/0/preference/stream/list"+m,TAG_LIST:"reader/api/0/tag/list"+m+"&ino=reader",UNREAD_COUNT:"reader/api/0/unread-count"+m,USER_INFO:"simple_api/"+m+"&get_user_info",FEED_INFO:"api/browser_extensions.php"+m,SAVE_WEB_PAGE:"reader/api/0/save-web-page"+m,ADD_FEED:"reader/api/0/subscription/quickadd"+m,COUNTERS:"api/browser_extensions.php"+m+"&counters=1"},w=3e4,x=3e5,I=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_.storage.local.get(["base_url"]);case 2:return r=e.sent,e.abrupt("return",fetch(r.base_url+t,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw 401===e.status&&e.url.startsWith(r.base_url)&&_.storage.local.set({authorized:!1}),e;return _.storage.local.set({authorized:!0}),e})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function S(){return I(v.SUBSCRIPTION_LIST).then((function(e){return e.json()}))}function y(){return I(v.STREAM_LIST).then((function(e){return e.json()}))}function E(){return I(v.TAG_LIST).then((function(e){return e.json()}))}function R(){return I(v.UNREAD_COUNT).then((function(e){return e.json()}))}function A(){return I(v.USER_INFO).then((function(e){return e.json()}))}function T(e){var t=v.FEED_INFO+"&images=1&fetch_url="+encodeURIComponent(e);return I(t).then((function(e){return e.json()}))}function j(e){return I(v.SAVE_WEB_PAGE+"&url="+encodeURIComponent(e)+"&return_url=1").then((function(e){return e.text()}))}function k(e,t){var r=v.SAVE_WEB_PAGE+"&article_id="+encodeURIComponent(e)+"&tags="+encodeURIComponent(t.join(","));return I(r)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.join(",");return I(v.ADD_FEED+"&quickadd="+encodeURIComponent(e)+"&folders="+encodeURIComponent(r)).then((function(e){return e.text()}))}function U(e){return N.apply(this,arguments)}function N(){return N=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_.storage.local.get(["base_url"]);case 2:return r=e.sent,t||(t=r.base_url),e.abrupt("return",L().then((function(e){return t&&t!==r.base_url||!e?e?_.tabs.update(e.id,{url:t,active:!0}):_.tabs.create({url:t}):_.tabs.update(e.id,{active:!0})})));case 5:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function L(){return C.apply(this,arguments)}function C(){return C=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,o,a,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_.storage.local.get(["base_url"]);case 2:return t=e.sent,e.next=5,_.windows.getAll({populate:!0});case 5:r=e.sent,o=Object(n["a"])(r),e.prev=7,o.s();case 9:if((a=o.n()).done){e.next=16;break}if(s=a.value,u=s.tabs.find((function(e){return e.url&&e.url.startsWith(t.base_url)})),!u){e.next=14;break}return e.abrupt("return",u);case 14:e.next=9;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](7),o.e(e.t0);case 21:return e.prev=21,o.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[7,18,21,24]])}))),C.apply(this,arguments)}function D(){L().then((function(e){e?_.tabs.sendMessage(e.id,{action:"force_counter_refresh"}).then((function(e){console.log("Forced tab to reload counters",e)})).catch((function(e){V()})):(console.log("Fetching data from servers"),V())}))}function F(e){L().then((function(t){_.tabs.update(t.id,{active:!0}).then((function(){_.tabs.executeScript(t.id,{code:'location.href="javascript:'+e+';"'})}))}))}function P(e){var t=e.tab,r=e.url,n="subscribe.html?"+encodeURIComponent(r);return n=_.extension.getURL(n),t&&t.id?(_.tabs.executeScript(t.id,{code:"if (history.length > 1) history.go(-1); else window.close();"}),_.tabs.create({url:n,index:t.index})):_.tabs.create({url:n}),!0}function z(e){_.tabs.create({url:e})}function V(){return B.apply(this,arguments)}function B(){return B=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n,o,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=null,r=_.storage.local.get(["badge_type"]),"3"!==r.badge_type){e.next=4;break}return e.abrupt("return",!0);case 4:return n=setTimeout((function(){console.error("Connection timeout"),_.storage.local.set({fetch_error:new Error("Timeout")})}),w),e.prev=5,o=r.badge_type||1,a=v.COUNTERS+"&type="+o,e.next=10,I(a);case 10:if(t=e.sent,n&&clearTimeout(n),!t.ok){e.next=18;break}return e.next=15,t.json();case 15:s=e.sent,s.lastUpdate=Math.floor(Date.now()/1e3),_.storage.local.set({counters:s,fetch_error:null,authorized:!0});case 18:e.next=25;break;case 20:e.prev=20,e.t0=e["catch"](5),console.error("fetch error",e.t0,e.t0.status),_.storage.local.set({fetch_error:e.t0}),401===e.t0.status&&_.storage.local.set({authorized:!1});case 25:case"end":return e.stop()}}),e,null,[[5,20]])}))),B.apply(this,arguments)}function G(e,t){_.tabs.update(t,{url:"view-source:"+e})}_.runtime.onMessage.addListener(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var n,o,s,u,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a["c"]>=a["d"].info&&console.log(t,r),t.msg===a["e"].SERVER_REFRESH&&_.storage.local.get(["authorized"]).then((function(e){e.authorized&&V()})),t.msg!==a["e"].NAVIGATE_INOREADER){e.next=6;break}U(t.url),e.next=33;break;case 6:if(t.msg!==a["e"].NAVIGATE_EXTENSION){e.next=10;break}z(t.url),e.next=33;break;case 10:if("openWebFeed"!==t.msg){e.next=14;break}F("dialog('page2rss_dialog', { url : '"+t.url+"' })"),e.next=33;break;case 14:if("viewSource"!==t.msg){e.next=18;break}return e.abrupt("return",G(t.feedUrl,r.tab.id));case 18:if("feedIcon"!==t.msg){e.next=28;break}for(n=[],o=0;o<t.feeds.length;++o)s=document.createElement("a"),s.href=t.feeds[o].href,"http:"===s.protocol||"https:"===s.protocol?n.push(t.feeds[o]):console.log("Warning: feed source rejected (wrong protocol): "+t.feeds[o].href);return u={},u[r.tab.id]=n,_.storage.local.set(u),_.storage.local.set({feeds:u[r.tab.id]}),e.abrupt("return",!0);case 28:if("feedDocument"!==t.msg){e.next=33;break}return e.next=31,_.storage.local.get(["rss_preview"]);case 31:i=e.sent,"1"===i.rss_preview&&P({tab:r.tab,url:t.href});case 33:return t.option_update?(V(),f()):t.url&&!t.msg&&_.tabs.query({active:!0,currentWindow:!0}).then((function(e){_.tabs.query({currentWindow:!0}).then((function(r){var n=0,o=e&&e.length?e[0].id:0;for(var a in r){var s=r[a];s.active&&(n=s.index),s.openerTabId==o&&(n=s.index)}console.log("Creating new tab "+(n+1)+" with URL "+t.url);try{_.tabs.create({url:t.url,active:!1,openerTabId:o,index:++n})}catch(u){_.tabs.create({url:t.url,active:!1,index:n})}}))})),e.abrupt("return",!0);case 35:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),setInterval((function(){D()}),x),D()}});