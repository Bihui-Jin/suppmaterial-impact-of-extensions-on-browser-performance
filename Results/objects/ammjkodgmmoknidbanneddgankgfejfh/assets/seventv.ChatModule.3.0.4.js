var dt=Object.defineProperty;var ht=(e,s,o)=>s in e?dt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o;var Z=(e,s,o)=>(ht(e,typeof s!="symbol"?s+"":s,o),o);import{e as F,l as u,f as m,j as a,k as U,x as G,m as ae,_ as A,u as Y,y as q,z as ge,A as ve,F as X,t as pt,H as K,i as mt,S as _t,a as j,aF as ft,M as Ne,aG as gt,X as qe,as as Q,at as De,au as vt,q as we,s as le,K as Re,aH as Ge,I as yt,n as be,az as se,w as Xe,a2 as Je,av as bt,$ as Ze,aE as Pe,aI as Ct,o as wt,aJ as St,C as kt,B as xe,ap as Mt,ar as D}from"./seventv.useSettings.3.0.4.js";import{d as xt,a as $t,O as Tt,u as pe,b as Et}from"./seventv.ReactHooks.3.0.4.js";import{g as It,d as Dt}from"./seventv.useModule.3.0.4.js";import{t as E,u as w,n as Le,a as oe,r as R,w as Ve,m as Qe,l as ne,ab as _e,b as me,a6 as et,aa as Rt}from"./seventv.useUserAgent.3.0.4.js";import{C as Ce,a as W,M as ze,b as Pt}from"./seventv.ChatMessage.3.0.4.js";import{u as ce}from"./seventv.useChannelContext.3.0.4.js";import{u as tt}from"./seventv.useChatEmotes.3.0.4.js";import{u as Ae,a as st,C as Vt}from"./seventv.UiConfirmPrompt.3.0.4.js";import{T as Ht,u as Se,a as Nt,U as Lt,t as At,b as Ut}from"./seventv.index.3.0.4.js";import{u as We}from"./seventv.useWorker.3.0.4.js";import{i as Ft,a as Bt,_ as Ot,v as Gt}from"./seventv.index.3.0.42.js";import{n as nt,q as zt,m as Wt}from"./seventv.index.esm.3.0.4.js";import{s as jt}from"./seventv.pinia.3.0.4.js";import{u as Yt}from"./seventv.main.3.0.4.js";import{n as Kt}from"./seventv.Emote.3.0.4.js";import{c as qt,a as Xt}from"./seventv.Transform.3.0.4.js";import{U as at}from"./seventv.StarIcon.3.0.4.js";import{U as Jt}from"./seventv.UiFloating.3.0.4.js";const Zt={class:"seventv-chat-message-container"},Qt={class:"seventv-chat-message-background",tabindex:"0"},es={key:0,class:"seventv-reply-part"},ts={class:"seventv-chat-reply-icon"},ss={class:"seventv-reply-message-part"},ns=F({__name:"0.NormalMessage",props:{msg:null,msgData:null},setup(e){return(s,o)=>(u(),m("div",Zt,[a("div",Qt,[e.msgData.reply?(u(),m("div",es,[a("div",ts,[U(Ht)]),a("div",ss,E(`Replying to @${e.msgData.reply.parentDisplayName}: ${e.msgData.reply.parentMessageBody}`),1)])):G("",!0),ae(s.$slots,"default",{},void 0,!0)])]))}});const as=A(ns,[["__scopeId","data-v-7ee2c673"]]),os={class:"seventv-welcome-message"},is=F({__name:"11.Connected",props:{msgData:null},setup(e){return(s,o)=>(u(),m("span",os," Welcome to the chat room! "))}});const rs=A(is,[["__scopeId","data-v-65350f82"]]),ls={},cs={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-brand)"},us=a("g",null,[a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 5v8a2 2 0 0 1-2 2H4a2.002 2.002 0 0 1-2-2V5l4 3 4-4 4 4 4-3z"})],-1),ds=[us];function hs(e,s){return u(),m("svg",cs,ds)}const ot=A(ls,[["render",hs]]),ps={},ms={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},_s=a("g",null,[a("path",{d:"M8.944 2.654c.406-.872 1.706-.872 2.112 0l1.754 3.77 4.2.583c.932.13 1.318 1.209.664 1.853l-3.128 3.083.755 4.272c.163.92-.876 1.603-1.722 1.132L10 15.354l-3.579 1.993c-.846.47-1.885-.212-1.722-1.132l.755-4.272L2.326 8.86c-.654-.644-.268-1.723.664-1.853l4.2-.583 1.754-3.77z"})],-1),fs=[_s];function gs(e,s){return u(),m("svg",ms,fs)}const it=A(ps,[["render",gs]]),vs=e=>(ge("data-v-e1023e3a"),e=e(),ve(),e),ys={class:"seventv-sub-message-container seventv-highlight"},bs={class:"sub-part"},Cs={class:"sub-message-icon"},ws={class:"sub-message-text"},Ss={key:0,class:"sub-name bold"},ks=vs(()=>a("span",{class:"bold"},"Subscribed",-1)),Ms=F({__name:"14.SubscriptionMessage",props:{msg:null,msgData:null},setup(e){var h,i;const s=e,o=((h=s.msgData.methods)==null?void 0:h.plan)=="Prime"?"Prime":"Tier "+((i=s.msgData.methods)==null?void 0:i.plan.charAt(0));return(C,_)=>(u(),m("span",ys,[a("div",bs,[a("div",Cs,[w(o)=="Prime"?(u(),Y(ot,{key:0})):(u(),Y(it,{key:1}))]),a("div",ws,[e.msg.author?(u(),m("span",Ss,E(e.msg.author.displayName),1)):G("",!0),ks,q(" with "+E(w(o))+". ",1)])]),e.msg.body?ae(C.$slots,"default",{key:0},void 0,!0):G("",!0)]))}});const xs=A(Ms,[["__scopeId","data-v-e1023e3a"]]),$s=e=>(ge("data-v-a771079e"),e=e(),ve(),e),Ts={class:"seventv-sub-message-container seventv-highlight"},Es={class:"sub-part"},Is={class:"sub-message-icon"},Ds={class:"sub-message-text"},Rs={key:0,class:"sub-name bold"},Ps=$s(()=>a("span",{class:"bold"},"Subscribed",-1)),Vs={class:"bold"},Hs={key:0,class:"message-part"},Ns=F({__name:"15.Resubscription",props:{msgData:null},setup(e){var h,i;const s=e,o=((h=s.msgData.methods)==null?void 0:h.plan)=="Prime"?"Prime":"Tier "+((i=s.msgData.methods)==null?void 0:i.plan.charAt(0));return(C,_)=>{var b;return u(),m("span",Ts,[a("div",Es,[a("div",Is,[((b=e.msgData.methods)==null?void 0:b.plan)=="Prime"?(u(),Y(ot,{key:0})):(u(),Y(it,{key:1}))]),a("div",Ds,[e.msgData.user?(u(),m("span",Rs,E(e.msgData.user.displayName),1)):G("",!0),Ps,q(" with "+E(w(o))+". They've subscribed for ",1),a("span",Vs,E(e.msgData.cumulativeMonths)+" months",1),e.msgData.shouldShareStreakTenure?(u(),m(X,{key:1},[q(" , "+E(e.msgData.streakMonths)+" month"+E((e.msgData.streakMonths??0)>1?"s":"")+" in a row. ",1)],64)):(u(),m(X,{key:2},[q("! ")],64))])]),e.msgData.message?(u(),m("div",Hs,[ae(C.$slots,"default",{},void 0,!0)])):G("",!0)])}}});const Ls=A(Ns,[["__scopeId","data-v-a771079e"]]),As={},Us={width:"25px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},Fs=a("g",null,[a("path",{"fill-rule":"evenodd",d:"M16 6h2v6h-1v6H3v-6H2V6h2V4.793c0-2.507 3.03-3.762 4.803-1.99.131.131.249.275.352.429L10 4.5l.845-1.268a2.81 2.81 0 01.352-.429C12.969 1.031 16 2.286 16 4.793V6zM6 4.793V6h2.596L7.49 4.341A.814.814 0 006 4.793zm8 0V6h-2.596l1.106-1.659a.814.814 0 011.49.451zM16 8v2h-5V8h5zm-1 8v-4h-4v4h4zM9 8v2H4V8h5zm0 4H5v4h4v-4z","clip-rule":"evenodd"})],-1),Bs=[Fs];function Os(e,s){return u(),m("svg",Us,Bs)}const Gs=A(As,[["render",Os]]),zs={class:"seventv-sub-message-container seventv-highlight"},Ws={class:"sub-part"},js={class:"gift-icon"},Ys={class:"sub-message-text"},Ks={class:"sub-name bold"},qs={class:"bold"},Xs={class:"bold"},Js=F({__name:"21.SubGift",props:{msgData:null},setup(e){return(s,o)=>{var h;return u(),m("span",zs,[a("div",Ws,[a("div",js,[U(Gs)]),a("div",Ys,[a("span",Ks,E(e.msgData.user.displayName),1),q(" Gifted a "),a("span",qs," Tier "+E((h=e.msgData.methods)==null?void 0:h.plan.charAt(0)),1),q(" sub to "),a("span",Xs,E(e.msgData.recipientDisplayName),1)])])])}}});const Zs=A(Js,[["__scopeId","data-v-8c5b043a"]]),Qs={class:"seventv-raid-message-container"},en=F({__name:"26.Raid",props:{msgData:null},setup(e){return(s,o)=>(u(),m("span",Qs,E(e.msgData.params.displayName)+" raided with a viewer count of "+E(e.msgData.params.viewerCount)+". ",1))}});const tn=A(en,[["__scopeId","data-v-5e1f5396"]]),sn={},nn={alt:"mystery gift",class:"mystery-gift-theme__image",src:"https://static-cdn.jtvnw.net/subs-image-assets/gift-illus.png"};function an(e,s){return u(),m("img",nn)}const on=A(sn,[["render",an]]),rn={class:"seventv-sub-message-container seventv-highlight"},ln={class:"sub-part"},cn={class:"gift-icon"},un={class:"sub-message-text"},dn={class:"sub-name-big"},hn=F({__name:"35.SubMysteryGift",props:{msgData:null},setup(e){return(s,o)=>(u(),m("span",rn,[a("div",ln,[a("div",cn,[U(on)]),a("div",un,[a("span",dn,E(e.msgData.user.displayName),1),q(" is gifting "+E(e.msgData.massGiftCount)+" Tier "+E(e.msgData.plan.charAt(0))+" Sub"+E(e.msgData.massGiftCount>1?"s":"")+" to "+E(e.msgData.channel)+"'s community. ",1),e.msgData.senderCount==e.msgData.massGiftCount?(u(),m(X,{key:0},[q(" It's their first Gift Sub in the channel! ")],64)):(u(),m(X,{key:1},[q(" They've gifted a total of "+E(e.msgData.senderCount)+" Subs in the channel! ",1)],64))])])]))}});const pn=A(hn,[["__scopeId","data-v-30965e12"]]),mn={},_n={type:"color-fill-current",width:"1em",height:"1em",version:"1.1",viewBox:"0 0 20 20",fill:"currentColor"},fn=a("g",null,[a("path",{d:"M10 6a4 4 0 014 4h-2a2 2 0 00-2-2V6z"}),a("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-2 0a6 6 0 11-12 0 6 6 0 0112 0z","clip-rule":"evenodd"})],-1),gn=[fn];function vn(e,s){return u(),m("svg",_n,gn)}const yn=A(mn,[["render",vn]]),bn={class:"seventv-reward-message-container seventv-highlight"},Cn={key:0,class:"reward-part"},wn={class:"reward-left"},Sn={class:"reward-username bold"},kn={class:"reward-name bold"},Mn={class:"reward-cost bold"},xn=["highlight"],$n=F({__name:"43.PointsReward",props:{msg:null,msgData:null},setup(e){return(s,o)=>(u(),m("span",bn,[e.msgData.reward?(u(),m("div",Cn,[a("div",wn,[a("span",Sn,E(e.msgData.displayName),1),q(" redeemed "),a("span",kn,E(e.msgData.reward.name),1)]),a("span",Mn,[U(yn),a("span",null,E(e.msgData.reward.cost),1)])])):G("",!0),e.msgData.message?(u(),m("div",{key:1,class:"message-part",highlight:e.msgData.reward.isHighlighted},[ae(s.$slots,"default",{},void 0,!0)],8,xn)):G("",!0)]))}});const Tn=A($n,[["__scopeId","data-v-343f91e7"]]),En={},In={fill:"var(--color-fill-current)",width:"18px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px"},Dn=a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 14l7 4V2l-7 4H4a2 2 0 00-2 2v4a2 2 0 002 2h2v4h2v-4h3zm1-6.268l4-2.286v9.108l-4-2.286V7.732zM10 12H4V8h6v4z"},null,-1),Rn=[Dn];function Pn(e,s){return u(),m("svg",In,Rn)}const Vn=A(En,[["render",Pn]]),Hn=e=>(ge("data-v-a5ccbfbc"),e=e(),ve(),e),Nn={class:"announce-header"},Ln={class:"announce-icon"},An=Hn(()=>a("div",{class:"announce-title"},"Announcement",-1)),Un={class:"announce-message"},Fn=F({__name:"49.AnnouncementMessage",props:{msgData:null},setup(e){const s=e,o=ce(),h=Se(o),i="announcement-line--"+(s.msgData.color=="PRIMARY"&&h.primaryColorHex==null?"purple":s.msgData.color.toLowerCase());return(C,_)=>(u(),m("div",{class:Le(["seventv-announce-message-container",i])},[a("div",Nn,[a("div",Ln,[U(Vn)]),An]),a("div",Un,[ae(C.$slots,"default",{},void 0,!0)])]))}});const Bn=A(Fn,[["__scopeId","data-v-a5ccbfbc"]]),On={class:"seventv-basic-system-message"},Gn=F({__name:"BasicSystemMessage",props:{text:null},setup(e){return(s,o)=>(u(),m("span",On,E(e.text),1))}});const rt=A(Gn,[["__scopeId","data-v-dbdccd86"]]);function zn(e){const s=e;return Array.isArray(s.messageParts)&&typeof s.messageType=="number"}function Wn(e){const s=e;return Array.isArray(s.messageParts)||typeof s.message=="object"}function jn(e){return typeof e.moderationType=="number"}const je=new Map;function Ye(e,s=!0){const o=s?je.get(e)||je.set(e,new Audio(e)).get(e):new Audio(e),h=(C=1)=>{o.volume=C,o.play()},i=()=>o.pause();return pt(()=>{o.remove()}),{play:h,stop:i,audio:o}}const Ke=new WeakMap,$e=K("highlights.custom"),Yn=K("highlights.sound_volume");function lt(e){const s=nt(),o=mt(_t,""),h=oe({ping:Ye(o+"/sound/ping.ogg")});let i=Ke.get(e);i||(i=oe({highlights:{}}),j($e,l=>{if(i){for(const[t,y]of Object.entries(i.highlights))y.persist&&delete i.highlights[t];for(const[,t]of l)i.highlights[t.id]=t,b(t),f(t)}},{immediate:!0}),Ke.set(e,i));const C=xt(function(){if(!i)return;const l=Array.from(Object.values(i.highlights)).filter(t=>t.persist).map(t=>[t.id,Ve({...t,soundFile:Ve(t.soundFile),soundDef:void 0,flashTitleFn:void 0})]);$e.value=new Map(l)},250);function _(l,t,y){if(!i)return{};const H=i.highlights[l]={...t,id:l,persist:y};return b(H),y&&($e.value.set(l,Qe(H)),C()),H}function b(l){var H;if(!l.soundFile){(H=l.soundPath)!=null&&H.startsWith("#")&&h[l.soundPath.slice(1)]&&(l.soundDef=h[l.soundPath.slice(1)]);return}const t=new Blob([l.soundFile.data],{type:l.soundFile.type}),y=URL.createObjectURL(t);return l.soundPath=y,l.soundDef=Ye(y),y}function f(l){l.flashTitleFn=l.flashTitle?()=>` 💬 Highlight: ${l.label||l.pattern}`:void 0}function k(l){i&&(delete i.highlights[l],C())}function S(l,t){if(!i)return!1;const y=i==null?void 0:i.highlights[l];if(!y)return!1;let H=!1;if(y.regexp){let O=y.cachedRegExp;if(!O)try{O=new RegExp(y.pattern,"i"),Object.defineProperty(y,"cachedRegExp",{value:O})}catch(x){return ne.warn("<ChatHighlights>","Invalid regexp:",y.pattern??""),t.setHighlight("#878787","Error "+x.message),!1}H=O.test(t.body)}else y.pattern?H=y.caseSensitive?t.body.includes(y.pattern):t.body.toLowerCase().includes(y.pattern.toLowerCase()):typeof y.test=="function"&&(H=y.test(t));return H&&(t.setHighlight(y.color,y.label),y.soundDef&&!t.historical&&y.soundDef.play(Yn.value/100),y.flashTitleFn&&!t.historical&&z(y,t)),H}const P=R(""),v=R(document.title);let M=0;const T=ft(()=>{zt(M++%2===0?P.value:v.value)},1e3,{immediate:!1,immediateCallback:!0});function z(l,t){!l.flashTitleFn||T.isActive.value||(v.value=document.title,P.value=l.flashTitleFn(t),T.resume(),Ne(s).toBe("visible").then(()=>{T.pause(),P.value="",document.title=v.value}))}function d(){return i?gt(i.highlights):{}}function g(l,t){if(!i)return;const y=i.highlights[l];y&&(i.highlights[t]=y,delete i.highlights[l],y.id=t,C())}return{define:_,remove:k,getAll:d,save:C,updateId:g,checkMatch:S,updateSoundData:b,updateFlashTitle:f}}const Kn=["id"],qn=F({__name:"ChatMessageUnhandled",props:{msg:null},setup(e){const s=e,o=R(null);return qe(()=>{!o.value||!s.msg.wrappedNode||o.value.appendChild(s.msg.wrappedNode)}),(h,i)=>(u(),m("span",{id:e.msg.id,ref_key:"msgContainer",ref:o,class:"seventv-unhandled-message-ref"},null,8,Kn))}}),fe=300,Xn=40,Te=80,Jn=1209600;function Zn(e){return e<60?`${Math.round(e)} seconds`:e<60*60?`${Math.round(e/60)} minutes`:e<60*60*24?`${Math.round(e/(60*60))} hours`:`${Math.round(e/(60*60*24))} days`}class Qn{constructor(s=!1){Z(this,"command","");Z(this,"banDuration",null);Z(this,"text","");Z(this,"time",0);Z(this,"banVis",0);Z(this,"unbanVis",0);Z(this,"color","");Z(this,"pos","0px");this.isActor=s}secondsToBanDuration(s){const o=Ft({start:0,end:s*1e3});return"".concat(o.seconds?`${o.seconds}s`:"",o.days?`${o.days}d`:"",o.hours?`${o.hours}h`:"",o.minutes?`${o.minutes}m`:"")}calculate(s){if(this.pos=`${this.isActor?Math.max(0,s):s}px`,s<-40&&!this.isActor)this.command="unban",this.unbanVis=1;else if(s<Xn){this.command="",this.text="",this.color="";return}else if(s<Te)this.command="delete",this.text="Delete",this.color="#FFFF00",this.banVis=1;else if(s<fe&&!this.isActor){const o=Math.pow((s+.25*fe-Te)/(1.25*fe-Te),10)*Jn;this.command="ban",this.banDuration=this.secondsToBanDuration(Math.round(o))||"14d",this.text=String(Zn(o)),this.color="#FFA500",this.banVis=1}else s>=fe&&!this.isActor&&(this.command="ban",this.banDuration=null,this.text="Ban",this.color="#C40000",this.banVis=1)}}const ea=e=>(ge("data-v-54693508"),e=e(),ve(),e),ta={class:"grabbable-wrapper"},sa=ea(()=>a("div",{class:"grabbable-inner"},[a("div",{class:"dots"})],-1)),na=[sa],aa={class:"wrapped"},oa=F({__name:"ModSlider",props:{msg:null},setup(e){var T,z;const s=e,o=ce(),h=Nt(o,((T=s.msg.author)==null?void 0:T.username)??""),i=Se(o),C=R(!1),_=R(!1),b=oe(new Qn(((z=s.msg.author)==null?void 0:z.isActor)??!1)),f=_e(b,"pos");let k=0;const S=R(!1);j(()=>[i.isModerator],d=>{S.value=d.every(g=>g)},{immediate:!0});const P=d=>{d.stopPropagation(),k=d.pageX,_.value=!0,d.target.setPointerCapture(d.pointerId)},v=d=>{var g;if(_.value=!1,b.command&&s.msg.author)switch(b.command){case"ban":h.banUserFromChat(((g=b.banDuration)==null?void 0:g.toString())??null);break;case"unban":h.unbanUserFromChat();break;case"delete":h.deleteChatMessage(s.msg.id);break}C.value=!0,setTimeout(()=>C.value=!1,300),b.calculate(0),d.target.releasePointerCapture(d.pointerId)},M=d=>{if(!_.value)return;d.preventDefault();const g=Math.max(Math.min(d.pageX-k,fe),-60);b.calculate(g)};return(d,g)=>S.value?(u(),m("div",{key:0,class:"seventv-ban-slider",style:me({transform:"translateX("+w(f)+")",transition:C.value?"transform 0.3s ease":"none",boxShadow:_.value?"black 0px 0.1rem 0.2rem":"none"})},[a("div",{class:"ban-background",style:me({backgroundColor:b.color,width:w(f)})},[a("span",{class:"text",style:me({opacity:b.banVis})},E(b.text),5)],4),a("div",ta,[a("div",{class:"grabbable-outer",onPointerdown:P,onPointerup:v,onPointermove:M},na,32)]),a("div",aa,[ae(d.$slots,"default",{},void 0,!0)]),a("div",{class:"unban-background",style:me({width:"calc(-1 *"+w(f)+")"})},[a("span",{class:"text",style:me({opacity:b.unbanVis})}," Unban ",4)],4)],4)):ae(d.$slots,"default",{key:1},void 0,!0)}});const ia=A(oa,[["__scopeId","data-v-54693508"]]),ra=["alternating-background"],la=["msg-id"],ca=F({__name:"ChatList",props:{list:null,messageHandler:null},setup(e,{expose:s}){const o=e,h=ce(),{identity:i}=jt(Yt()),C=tt(h),_=Ae(h),b=_e(_,"displayed"),f=st(h),k=Se(h),S=lt(h),P=nt(),v=_e(k,"hovering"),M=R(!1),T=K("chat.mod_slider"),z=K("chat.alternating_background"),d=K("highlights.basic.mention"),g=K("highlights.basic.first_time_chatter"),l=K("highlights.basic.mention_sound"),t=K("highlights.basic.mention_title_flash"),y=_e(o,"messageHandler"),H=_e(o,"list"),O=R(),x=Object.assign({"./components/types/0.NormalMessage.vue":as,"./components/types/11.Connected.vue":rs,"./components/types/14.SubscriptionMessage.vue":xs,"./components/types/15.Resubscription.vue":Ls,"./components/types/21.SubGift.vue":Zs,"./components/types/26.Raid.vue":tn,"./components/types/35.SubMysteryGift.vue":pn,"./components/types/43.PointsReward.vue":Tn,"./components/types/49.AnnouncementMessage.vue":Bn,"./components/types/BasicSystemMessage.vue":rt,"./components/types/EmoteSetUpdateMessage.vue":Bt}),ie={},ue=/\.\/components\/types\/(\d+)\.(\w+)\.vue$/;for(const[n,r]of Object.entries(x)){const[,p]=n.match(ue)??[];if(!p)continue;const N=parseInt(p);Number.isNaN(N)||(ie[N]=r)}function ke(n){return ie[n]??null}const re=n=>{const r=new Ce(n.id);switch(r.channelID=h.id,n.type){case W.MESSAGE:case W.SUBSCRIPTION:case W.RESUBSCRIPTION:case W.SUB_GIFT:case W.RAID:case W.SUB_MYSTERY_GIFT:case W.CHANNEL_POINTS_REWARD:case W.ANNOUNCEMENT_MESSAGE:case W.RESTRICTED_LOW_TRUST_USER_MESSAGE:case W.CONNECTED:de(r,n);break;case W.MODERATION:if(!jn(n))break;Me(n);break;case W.MESSAGE_ID_UPDATE:ye(n);break;default:return!1}return _.handlers.forEach(p=>p(n)),!0};function de(n,r,p=!0){var ee,J,te,Ue,Fe,Be,Oe;const N=ke(r.type);N&&n.setComponent(N,{msgData:r}),n.instance||n.setComponent(ie[0],{msgData:r}),r.type===W.RESTRICTED_LOW_TRUST_USER_MESSAGE&&n.setHighlight("#ff7d00","Restricted Suspicious User");const I=r.user??((ee=r.message)==null?void 0:ee.user)??null;if(I){const B=_.chatters[I.userID],L=I.color?k.useHighContrastColors?Kt(I.color,k.isDarkTheme):I.color:null;if(B&&(B.username=I.userLogin,B.displayName=I.userDisplayName??I.displayName??I.userLogin,B.color=L??B.color,B.intl=I.isIntl),n.setAuthor(B??{id:I.userID,username:I.userLogin??((J=I.userDisplayName??I.displayName)==null?void 0:J.toLowerCase()),displayName:I.userDisplayName??I.displayName??I.userLogin,color:L}),n.author&&k.blockedUsers.has(n.author.id)){if(!k.isModerator){ne.debug("Ignored message from blocked user",n.author.id);return}n.setHighlight("#9488855A","You Blocked This User")}i.value&&n.author&&n.author.id===i.value.id&&(n.author.isActor=!0),n.badges=r.badges??((te=r.message)==null?void 0:te.badges)??{}}if(Wn(r)){if(n.body=(r.messageBody??((Ue=r.message)==null?void 0:Ue.messageBody)??"").replace(`
`," "),typeof r.nonce=="string"&&n.setNonce(r.nonce),r.isFirstMsg&&g.value?n.setHighlight("#c832c8","First Message"):r.isReturningChatter&&n.setHighlight("#3296e6","Returning Chatter"),r.reply){const B=r.reply.parentUserLogin&&r.reply.parentDisplayName?{username:r.reply.parentUserLogin,displayName:r.reply.parentDisplayName}:null;n.parent={id:r.reply.parentMsgId,uid:r.reply.parentUid,deleted:r.reply.parentDeleted,body:r.reply.parentMessageBody,author:B},S.checkMatch("~reply",n)}r.messageType===1&&(n.slashMe=!0);for(const B of r.messageParts??((Fe=r.message)==null?void 0:Fe.messageParts)??[])switch(B.type){case ze.EMOTE:{const L=B.content;if(!L.alt||(Be=L.emoteID)!=null&&Be.startsWith("__FFZ__")||(Oe=L.emoteID)!=null&&Oe.startsWith("__BTTV__"))continue;n.nativeEmotes[L.alt+(L.cheerAmount??"")]={id:L.emoteID??"",name:L.alt,flags:0,provider:"TWITCH",isTwitchCheer:{amount:L.cheerAmount,color:L.cheerColor},data:L.cheerAmount?qt({alt:L.alt,cheerAmount:L.cheerAmount,cheerColor:L.cheerColor,images:L.images}):Xt({id:L.emoteID,token:L.alt})};break}case ze.FLAGGEDSEGMENT:{const L=B;if(!L.originalText)continue;n.body=n.body.replace(L.originalText,"*".repeat(L.originalText.length));break}}}if(r.nonce){n.setDeliveryState("IN_FLIGHT");const{stop:B}=yt(()=>{n.setDeliveryState("BOUNCED")},1e4);Ne(R(n.deliveryState)).toBe("SENT").then(B)}zn(r)?n.setTimestamp(r.timestamp):r.message&&n.setTimestamp(r.message.timestamp??0);for(const B in S.getAll())S.checkMatch(B,n);k.isModerator&&(n.pinnable=!0,n.deletable=!0),p&&_.add(n)}function Me(n){if(n.moderationType===Pt.DELETE){const r=_.find(p=>p.id==n.targetMessageID);r&&(r.moderation.deleted=!0)}else{const r=_.moderated[0];if(r&&r.victim&&r.victim.username===n.userLogin&&r.mod.banDuration===n.duration)return;const p=_.messagesByUser(n.userLogin),N={actionType:n.duration>0?"TIMEOUT":"BAN",banDuration:n.duration,banReason:n.reason,actor:null,banned:!0,deleted:!1,timestamp:Date.now()};let I=null;for(const ee of p)ee.moderation=N,I||(I=ee.author);_.moderated.unshift({id:Symbol("seventv-moderation-message"),messages:p.reverse().slice(0,10),mod:N,victim:I||{id:n.userLogin,username:n.userLogin,displayName:n.userLogin,color:""}}),_.moderated.length>125&&be(()=>{for(;_.moderated.length>100;)_.moderated.pop()})}}function ye(n){const r=_.find(p=>p.nonce==n.nonce);r&&(r.setID(n.id),r.setDeliveryState("SENT"))}j(y,(n,r)=>{n!==r&&r?Q(r,"handleMessage"):n&&De(n,"handleMessage",function(p,N){return re(N)?"":(he.set(N.id,N),p==null?void 0:p.call(this,N))})},{immediate:!0});const he=oe(new Map),c=new Map;vt(H.value.domNodes,n=>{const r=new Set(c.keys());for(const[p,N]of Object.entries(n)){if(p==="root"||(r.delete(p),c.has(p)||!he.has(p)))continue;const I=new Ce(p+"-unhandled");I.wrappedNode=N,_.add(I),c.set(p,N)}for(const p of r)c.delete(p)},{debounce:100,immediate:!0});const{alt:$}=Wt();let V=!1;return j([$,v],([n,r])=>{f.paused?V&&(f.unpause(),V=!1):(r&&k.pauseReason.has("MOUSEOVER")||r&&n&&k.pauseReason.has("ALTKEY"))&&(f.pause(),V=!0)}),j(P,n=>{n==="hidden"&&!f.paused?(f.pause(),M.value=!0):M.value&&(f.unpause(),M.value=!1)}),j([i,d,l,t],([n,r,p,N])=>{const I=n?`\\b${n.username}\\b`:null;if(!I)return;const ee=new RegExp(I,"i");r?(S.define("~mention",{pattern:I,regexp:!0,cachedRegExp:ee,label:"Mentions You",color:"#e13232",soundPath:p?"#ping":void 0,flashTitleFn:N?J=>{var te;return`🔔 @${((te=J.author)==null?void 0:te.username)??"A user"} mentioned you`}:void 0,flashTitle:!0}),S.define("~reply",{test:J=>!!(J.parent&&J.parent.author&&ee.test(J.parent.author.username)),label:"Replying to You",color:"#e13232",soundPath:p?"#ping":void 0,flashTitleFn:N?J=>{var te;return`🔔 @${((te=J.author)==null?void 0:te.username)??"A user"} replied to you`}:void 0,flashTitle:!0})):(S.remove("~mention"),S.remove("~reply"))},{immediate:!0}),s({onMessage:re,onChatMessage:de}),(n,r)=>(u(),m("main",{ref_key:"chatListEl",ref:O,class:"seventv-chat-list","alternating-background":w(z)},[(u(!0),m(X,null,we(w(b),p=>(u(),m("div",{key:p.sym,"msg-id":p.id,class:"seventv-message"},[p.instance?(u(),Y(Re(w(T)&&w(k).isModerator&&p.author?ia:"span"),et(Ge({key:0},{msg:p})),{default:le(()=>[(u(),Y(Re(p.instance),Ge(p.componentProps,{msg:p}),{default:le(()=>[U(Lt,{msg:p,emotes:w(C).active,chatters:w(_).chattersByUsername},null,8,["msg","emotes","chatters"])]),_:2},1040,["msg"]))]),_:2},1040)):(u(),Y(qn,{key:1,msg:p},null,8,["msg"]))],8,la))),128))],8,ra))}});const ua=A(ca,[["__scopeId","data-v-c0b88c32"]]),da={},ha={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",fill:"currentColor",width:"1em",height:"1em"},pa=a("path",{d:"M128 64H0V448H128V64zm192 0H192V448H320V64z"},null,-1),ma=[pa];function _a(e,s){return u(),m("svg",ha,ma)}const fa=A(da,[["render",_a]]),He=R(null),ct=R(null);se(window,"__Twitch__pubsubInstances",{value(e){!e||!e.production||!e.production._client||(He.value=e.production._client,se(He.value,"_primarySocket",{value(s){!s||!s._socket||(ct.value=s._socket)}}))}});function ga(){return oe({client:He,socket:ct})}const va=F({__name:"ChatPubSub",setup(e){const s=ce(),o=Ae(s),h=ga();Xe(()=>{h.socket&&(h.socket.removeEventListener("message",i),h.socket.addEventListener("message",i))});function i(f){let k;try{k=JSON.parse(f.data)}catch(T){ne.error("Failed to parse pubsub message",T.message);return}if(k.type!=="MESSAGE")return;const{topic:S,message:P}=k.data??{};if(typeof S!="string"||typeof P!="string"){ne.warn("received an invalid pubsub message");return}const{type:v,data:M}=JSON.parse(P??{});switch(v){case"low_trust_user_new_message":C(M);break;case"moderation_action":_(M);break;case"chat_rich_embed":b(M);break}}async function C(f){if(!f.low_trust_user)return;const S=await o.awaitMessage(f.message_id).catch(P=>{ne.debug("failed to find new message for low trust user",P.message)});S&&S.setHighlight("#ff7d00","Monitored Suspicious User")}async function _(f){const k=f.moderation_action;if(k)switch(k){case"ban":case"timeout":{const S=o.messagesByUser(f.target_user_login);if(!S)return;const P=f.args[1]||null,v=f.args[2]??"";for(const M of S)M.moderation.banReason=v,M.moderation.actor=f.created_by_user_id?{id:f.created_by_user_id,username:f.created_by??"",displayName:f.created_by??"",color:""}:null,M.moderation.banDuration=P?parseInt(P):null,M.moderation.banned=!0;break}}}async function b(f){if(!f.twitch_metadata)return;const S=await o.awaitMessage(f.message_id).catch(d=>{ne.debug("failed to find new message for chat rich embed",d.message)});if(!S)return;const{title:P,author_name:v,request_url:M,thumbnail_url:T,twitch_metadata:z}=f;S.richEmbed.title=P,S.richEmbed.author_name=v,S.richEmbed.request_url=M,S.richEmbed.thumbnail_url=T,S.richEmbed.twitch_metadata=z}return Je(()=>{h.socket&&h.socket.removeEventListener("message",i)}),(f,k)=>null}}),ya=F({__name:"ChatTray",setup(e){return(s,o)=>(u(!0),m(X,null,we(w(At),({parent:h,component:i,props:C},_)=>(u(),m(X,{key:_},[h.current?(u(),Y(Ze,{key:0,to:h.current},[(u(),Y(Re(i),et(bt(C)),null,16))],8,["to"])):G("",!0)],64))),128))}}),ba={id:"seventv-message-container",class:"seventv-message-container"},Ca=F({__name:"ChatController",props:{list:null,controller:null,room:null,buffer:null,events:null},setup(e){const s=e,o=It("chat"),{sendMessage:h}=We(),{list:i,controller:C,room:_}=Rt(s),b=document.createElement("seventv-container");b.id="seventv-chat-controller";const f=R(),k=R(b),S=R(null),P=R(b.getBoundingClientRect()),v=R(),M=R(""),T=ce(s.controller.component.props.channelID),z=We(),d=tt(T),g=Ae(T),l=st(T,{scroller:v,bounds:P}),t=Se(T),y=Ut(T),H=K("chat.line_limit",150),O=K("chat.ignore_clear_chat"),x=R(null);Xe(()=>{if(!i.value||!i.value.domNodes)return;const c=i.value.domNodes.root;c&&(c.classList.add("seventv-chat-list"),k.value=c)});const ie=R(null);se(s.list.component,"props",{value(c){var V,n;ie.value=c.messageHandlerAPI;const $=(V=c.children[0])==null?void 0:V.props;(n=$==null?void 0:$.badgeSets)!=null&&n.count&&(t.twitchBadgeSets=$.badgeSets)}});const ue=R([]),ke=Pe(ue,1e3);j(ke,async c=>{if(c.length)for(const $ of ue.value)$.id==="FrankerFaceZWasHere"||$.id==="BETTERTTV_EMOTES"||h("SYNC_TWITCH_SET",{input:Ve($)})}),se(_.value.component,"props",{value(c){switch(t.primaryColorHex=c.primaryColorHex,M.value=`#${c.primaryColorHex??"755ebc"}`,document.body.style.setProperty("--seventv-channel-accent",M.value),t.useHighContrastColors=c.useHighContrastColors,t.showTimestamps=c.showTimestamps,t.showModerationIcons=c.showModerationIcons,t.pauseReason.clear(),t.pauseReason.add("SCROLL"),c.chatPauseSetting){case"MOUSEOVER_ALTKEY":t.pauseReason.add("ALTKEY"),t.pauseReason.add("MOUSEOVER");break;case"MOUSEOVER":t.pauseReason.add("MOUSEOVER");break;case"ALTKEY":t.pauseReason.add("ALTKEY");break}}}),se(C.value.component,"props",{value(c){c.channelID&&(x.value={id:c.channelID,username:c.channelLogin,displayName:c.channelDisplayName}),t.isModerator=c.isCurrentUserModerator,t.isVIP=c.isCurrentUserVIP,t.isDarkTheme=c.theme,g.sendMessage=c.chatConnectionAPI.sendMessage,De(c.chatConnectionAPI,"sendMessage",function(V,...n){var r;z.sendMessage("CHANNEL_ACTIVE_CHATTER",{channel_id:T.id});for(const p of((r=o.instance)==null?void 0:r.messageSendMiddleware.values())??[])n[0]=p(n[0]);return V==null?void 0:V.apply(this,n)});const $=c.emoteSetsData;!$||$.loading||(ue.value=$.emoteSets)}});const re=$t({parentSelector:".stream-chat",predicate:c=>c.props&&(c.props.onShowViewerCard||c.openUserCard)});re.then(([c])=>{c&&y.update("TWITCH","onShowViewerCard",c.props.onShowViewerCard??c.openUserCard)},()=>null),re instanceof Tt&&Ne(Ct(1e4)).toBeTruthy().then(()=>re.disconnect());const de=R(null),Me=Pe(de,100);j(Me,(c,$)=>{$&&c!==$?(Q($,"buffer"),Q($,"blockedUsers")):c&&(se(c,"buffer",{value(V){var r;if(!V.length)return;const n=[];for(const p of V){const N=new Ce(p.id);if(p.isHistorical||p.type===W.CONNECTED){N.historical=!0,(r=f.value)==null||r.onChatMessage(N,p,!1),n.push(N);continue}}g.displayed=n.concat(g.displayed),be(()=>{l.scrollToLive(0),Q(c,"buffer")})}}),se(c,"blockedUsers",{value(V){t.blockedUsers=V}}))}),j(x,c=>{!c||!T.setCurrentChannel(c)||(g.clear(),l.unpause(),be(()=>d.resetProviders()))},{immediate:!0}),j(()=>s.buffer,c=>{const $=c==null?void 0:c.component;$&&(de.value=$)},{immediate:!0});const ye=R(null);j(()=>s.events,c=>{!c||!c.component||(ye.value=c.component)},{immediate:!0}),j(ye,(c,$)=>{$&&Q($,"onClearChatEvent"),c&&De(c,"onClearChatEvent",V=>{const n=new Ce().setComponent(rt,{text:O.value?"Chat clear prevented by 7TV":"Chat cleared by a moderator"});return O.value||g.clear(),g.add(n),V==null?void 0:V.apply(this,[{channel:""}])})},{immediate:!0});const he=new ResizeObserver(()=>{P.value=k.value.getBoundingClientRect()});return he.observe(k.value),wt(()=>{g.clear()}),Je(()=>{he.disconnect(),b.remove(),S.value&&S.value.classList.remove("seventv-checked"),ne.debug("<ChatController> Unmounted"),Q(i.value.component.props,"messageHandlerAPI"),Q(i.value.component,"props"),Q(C.value.component,"props"),Q(_.value.component,"props"),document.body.style.removeProperty("--seventv-channel-accent")}),(c,$)=>(u(),m(X,null,[w(T).id?(u(),Y(Ze,{key:0,to:k.value},[U(at,{ref_key:"scrollerRef",ref:v,class:"seventv-chat-scroller",onContainerScroll:w(l).onScroll,onContainerWheel:w(l).onWheel,onMouseenter:$[1]||($[1]=V=>w(t).hovering=!0),onMouseleave:$[2]||($[2]=V=>w(t).hovering=!1)},{default:le(()=>[a("div",ba,[U(ua,{ref_key:"chatList",ref:f,list:w(i),"message-handler":ie.value},null,8,["list","message-handler"])]),w(l).paused?(u(),m("div",{key:0,class:"seventv-message-buffer-notice",onClick:$[0]||($[0]=(...V)=>w(l).unpause&&w(l).unpause(...V))},[U(fa),w(l).pauseBuffer.length?(u(),m("span",{key:0,class:Le({capped:w(l).pauseBuffer.length>=w(H)})},E(w(l).pauseBuffer.length),3)):G("",!0),a("span",null,E(w(l).pauseBuffer.length>0?"new messages":"Chat Paused"),1)])):G("",!0)]),_:1},8,["onContainerScroll","onContainerWheel"]),w(T).loaded?(u(),Y(Ot,{key:0})):G("",!0)],8,["to"])):G("",!0),U(ya),U(va)],64))}});const wa={},Sa={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},ka=a("path",{d:"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 32a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm-96-32a96 96 0 1 0 192 0 96 96 0 1 0 -192 0zM96 240c0-35 17.5-71.1 45.2-98.8S205 96 240 96c8.8 0 16-7.2 16-16s-7.2-16-16-16c-45.4 0-89.2 22.3-121.5 54.5S64 194.6 64 240c0 8.8 7.2 16 16 16s16-7.2 16-16z"},null,-1),Ma=[ka];function xa(e,s){return u(),m("svg",Sa,Ma)}const $a=A(wa,[["render",xa]]),Ta=["checked"],Ee=F({__name:"FormCheckbox",props:{checked:{type:Boolean}},emits:["update:checked","update:modelValue"],setup(e,{emit:s}){function o(h){const i=h.target.checked;s("update:checked",i),s("update:modelValue",i)}return(h,i)=>(u(),m("div",null,[a("input",{id:"checkbox",checked:e.checked,type:"checkbox",onChange:o},null,40,Ta)]))}}),Ea=["type","error","autofocus","value","placeholder"],Ia=F({__name:"FormInput",props:{label:null,modelValue:null,type:{default:"text"},icon:null,error:{type:Boolean},width:null,appearance:{default:"outline"},autofocus:{type:Boolean}},emits:["update:modelValue","blur"],setup(e,{expose:s,emit:o}){const h=e;St(_=>({"230f5671":e.width}));const i=_=>o("update:modelValue",_.target.value),C=R(null);return s({focus:()=>{var _;return(_=C.value)==null?void 0:_.focus()}}),qe(()=>{C.value&&h.autofocus&&C.value.focus()}),(_,b)=>(u(),m("input",{ref_key:"inputEl",ref:C,type:e.type,error:e.error,autofocus:e.autofocus,value:e.modelValue,placeholder:e.label,onInput:i,onBlur:b[0]||(b[0]=f=>o("blur"))},null,40,Ea))}});const Ie=A(Ia,[["__scopeId","data-v-425102cf"]]),ut=e=>(ge("data-v-c543f774"),e=e(),ve(),e),Da={class:"seventv-settings-custom-highlights"},Ra=ut(()=>a("div",{class:"tabs"},null,-1)),Pa={class:"list"},Va=ut(()=>a("div",{class:"item heading"},[a("div",null,"Pattern"),a("div",null,"Label"),a("div",{class:"centered"},"Flash Title"),a("div",{class:"centered"},"RegExp"),a("div",null,"Case Sensitive"),a("div",null,"Color")],-1)),Ha=["onClick"],Na=["onClick"],La={name:"flash-title",class:"centered"},Aa={name:"is-regexp",class:"centered"},Ua={name:"case-sensitive",class:"centered"},Fa={name:"color"},Ba=["onUpdate:modelValue","onInput"],Oa={class:"sound-options"},Ga=["active","onClick"],za=["active","onClick"],Wa=["active"],ja={key:0},Ya=["onInput"],Ka={class:"item create-new"},qa={name:"pattern"},Xa=F({__name:"SettingsConfigHighlights",setup(e){const s=ce(),o=lt(s),h=R(""),i=oe({pattern:new WeakMap,label:new WeakMap}),C=R();function _(d,g){const l=i[g].get(d);l&&l.focus()}function b(d,g){if(!i[g].get(d))return;const t=Gt();o.updateId("new-highlight",t),o.save()}function f(d,g){d.flashTitle=g,o.updateFlashTitle(d),o.save()}function k(d,g){d.regexp=g,o.save()}function S(d,g){d.caseSensitive=g,o.save()}function P(d,g){if(!(g.target instanceof HTMLInputElement))return;const l=g.target.value;d.color=l,o.save()}function v(d,g){var y;if(!(g.target instanceof HTMLInputElement))return;const l=(y=g.target.files)==null?void 0:y[0];if(!l)return;const t=new FileReader;t.onload=H=>{if(!(H.target instanceof FileReader))return;const O=H.target.result;if(O instanceof ArrayBuffer){if(O.byteLength>50*1024)return alert("File is too large! (max 50KB)");delete d.soundPath,d.soundFile={name:l.name,type:l.type,data:O},o.updateSoundData(d),o.save()}},g.target.value="",t.readAsArrayBuffer(l)}function M(d){delete d.soundFile,delete d.soundDef,d.soundPath="#ping",o.save()}function T(d){delete d.soundFile,delete d.soundPath,delete d.soundDef,o.updateSoundData(d),o.save()}function z(d){o.remove(d.id),o.save()}return j(h,(d,g)=>{if(!d||g)return;const l=o.define("new-highlight",{color:"#8803fc",label:"",pattern:d},!0);be(()=>{const t=i.pattern.get(l);t&&(t.focus(),h.value="")})}),(d,g)=>{const l=kt("tooltip");return u(),m("main",Da,[Ra,a("div",Pa,[Va,U(at,null,{default:le(()=>[(u(!0),m(X,null,we(w(o).getAll(),(t,y,H)=>{var O;return u(),m("div",{key:t.id,class:"item"},[a("div",{name:"pattern",class:"use-virtual-input",tabindex:"0",onClick:x=>_(t,"pattern")},[a("span",null,E(t.pattern),1),U(Ie,{ref_for:!0,ref:x=>i.pattern.set(t,x),modelValue:t.pattern,"onUpdate:modelValue":x=>t.pattern=x,onBlur:x=>b(t,"pattern")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Ha),a("div",{name:"label",class:"use-virtual-input",tabindex:"0",onClick:x=>_(t,"label")},[a("span",null,E(t.label),1),U(Ie,{ref_for:!0,ref:x=>i.label.set(t,x),modelValue:t.label,"onUpdate:modelValue":x=>t.label=x,onBlur:x=>b(t,"label")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Na),a("div",La,[U(Ee,{checked:!!t.flashTitle,"onUpdate:checked":x=>f(t,x)},null,8,["checked","onUpdate:checked"])]),a("div",Aa,[U(Ee,{checked:!!t.regexp,"onUpdate:checked":x=>k(t,x)},null,8,["checked","onUpdate:checked"])]),a("div",Ua,[U(Ee,{checked:!!t.caseSensitive,"onUpdate:checked":x=>S(t,x)},null,8,["checked","onUpdate:checked"])]),a("div",Fa,[xe(a("input",{"onUpdate:modelValue":x=>t.color=x,type:"color",onInput:x=>P(t,x)},null,40,Ba),[[Mt,t.color]])]),a("div",{ref_for:!0,ref_key:"interactRef",ref:C,name:"interact"},[a("button",{ref_for:!0,ref:"soundEffectButton",class:Le(["sound-button",{"has-sound":!!t.soundFile}]),tabindex:"0"},[xe(U($a,null,null,512),[[l,"Set Custom Sound"]]),a("div",Oa,[(O=C.value)!=null&&O[H]?(u(),Y(Jt,{key:0,anchor:C.value[H]},{default:le(()=>[a("button",{active:!t.soundPath&&!t.soundFile,onClick:x=>T(t)}," No Sound ",8,Ga),a("button",{active:!!t.soundPath&&!t.soundFile,onClick:x=>M(t)}," Default Sound ",8,za),a("button",{active:!!t.soundFile},[a("label",null,[q(" Custom Sound"+E(t.soundFile?"":"...")+" ",1),t.soundFile?(u(),m("p",ja,E(t.soundFile.name),1)):G("",!0),a("input",{type:"file",accept:"audio/midi, audio/mpeg, audio/ogg, audio/wav, audio/webm, audio/vorbis, audio/ogg",onInput:x=>v(t,x)},null,40,Ya)])],8,Wa)]),_:2},1032,["anchor"])):G("",!0)])],2),xe(U(Vt,{tabindex:"0",onClick:x=>z(t)},null,8,["onClick"]),[[l,"Remove"]])],512)])}),128))]),_:1}),a("div",Ka,[a("div",qa,[U(Ie,{modelValue:h.value,"onUpdate:modelValue":g[0]||(g[0]=t=>h.value=t),label:"New Highlight..."},{default:le(()=>[q(" hi ")]),_:1},8,["modelValue"])])])])])}}});const Ja=A(Xa,[["__scopeId","data-v-c543f774"]]),Za=[D("general.blur_unlisted_emotes","TOGGLE",{path:["General",""],label:"Hide Unlisted Emotes",hint:"If checked, emotes which have not yet been approved for listing on 7tv.app will be blurred",defaultValue:!1}),D("chat.emote_margin","SLIDER",{path:["Chat","Style"],label:"Emote Spacing",hint:"Choose the margin around emotes in chat. Negative values lets them overlap and keep the chatlines inline. 0 Makes the emotes not overlap at all",options:{min:-1,max:1,step:.1,unit:"rem"},defaultValue:-.5,effect(e){document.documentElement.style.setProperty("--seventv-emote-margin",`${e}rem`)}}),D("chat.emote_scale","SLIDER",{path:["Chat","Style"],label:"Emote Scale",ffz_key:"chat.emotes.2x",ffz_transform(e){return typeof e=="number"&&e>0?2:1},hint:"Change how large emotes should be in chat, as a multiple of their original size.",options:{min:.25,max:3,step:.25,unit:"x"},defaultValue:1}),D("chat.mod_slider","TOGGLE",{path:["Chat","Moderation"],label:"Mod Slider",hint:"Enable the mod slider in channels where you are moderator",defaultValue:!0}),D("chat.ignore_clear_chat","TOGGLE",{path:["Chat","Moderation"],label:"Ignore Clear Chat",hint:"If enabled, messages will be kept intact when a moderator clears the chat",defaultValue:!0}),D("chat.slash_me_style","DROPDOWN",{path:["Chat","Style"],label:"/me Style",hint:"How the /me type messages should be displayed",options:[["Nothing",0],["Italic",1],["Colored",2],["Italic + Colored",3]],defaultValue:2}),D("chat.message_batch_duration","SLIDER",{path:["Chat","Performance"],label:"Message Batching",hint:"The time to wait between rendering new messages. Higher values may improve performance and readability, at the cost of chat feeling less responsive",options:{min:25,max:1e3,step:25,unit:"ms",named_thresolds:[[0,50,"Instant"],[50,250,"Fast"],[250,500,"Balanced"],[500,999,"Slow"],[1e3,1e3,"PowerPoint Presentation"]]},defaultValue:150}),D("chat.smooth_scroll_duration","SLIDER",{path:["Chat","Performance"],label:"Smooth scroll chat",hint:"Smoothly scroll new messages into view. This may impact performance.",options:{min:0,max:1500,step:100,unit:"ms"},defaultValue:0}),D("chat.line_limit","SLIDER",{path:["Chat","Performance"],label:"Message Buffer Capacity",hint:"Define the maximum amount of messages displayed in chat. Higher values may affect performance",options:{min:50,max:1e3,step:10,unit:"lines",named_thresolds:[[0,750,""],[751,1e3,"Performance Warning!"]]},defaultValue:150}),D("ui.compact_tooltips","TOGGLE",{path:["Appearance","Style"],label:"Compact tooltips",hint:"Make the tooltips compact instead of showing the full emote",defaultValue:!1}),D("chat.alternating_background","TOGGLE",{path:["Chat","Style"],ffz_key:"chat.lines.alternate",label:"Alternating Background",hint:"Display chat lines with alternating background colors",defaultValue:!1}),D("chat.padding","DROPDOWN",{path:["Chat","Style"],label:"Padding Style",ffz_key:"chat.lines.padding",ffz_transform(e){return e?1:0},effect(e){document.body.style.setProperty("--seventv-chat-padding",{0:"0.25rem",1:"1rem"}[e]??null)},hint:"Change the padding style of chat lines",options:[["Full-Width",0],["Native (Twitch-like)",1]],defaultValue:1}),D("chat.font_size","SLIDER",{path:["Chat","Style"],label:"Font Size",ffz_key:"chat.font-size",ffz_transform(e){return typeof e=="number"?e:13},effect(e){typeof e=="number"&&(e!==13?document.body.style.setProperty("--seventv-chat-font-size",`${e}px`):document.body.style.removeProperty("--seventv-chat-font-size"))},hint:"Change the size of text in chat, when set to default the size will be inferred from Twitch appearence settings",options:{min:1,max:30,step:1,unit:"px",named_values:[[13,13,"Default"]]},defaultValue:13}),D("chat.colored_mentions","TOGGLE",{path:["Chat","Style"],label:"Colored Mentions",hint:"Show the color of users mentioned in chat",defaultValue:!0}),D("chat.deleted_messages","DROPDOWN",{path:["Chat","Style"],label:"Deleted Message Style",hint:"Control how deleted messages are displayed in chat",effect(e){switch(document.body.style.removeProperty("--seventv-chat-deleted-display"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0.5"),document.body.style.setProperty("--seventv-chat-deleted-prefix","—"),e){case 0:document.body.style.setProperty("--seventv-chat-deleted-decoration","none"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0"),document.body.style.setProperty("--seventv-chat-deleted-display","none"),document.body.style.setProperty("--seventv-chat-deleted-prefix","");break;case 1:document.body.style.setProperty("--seventv-chat-deleted-decoration","none");break;case 2:document.body.style.setProperty("--seventv-chat-deleted-decoration","line-through");break;case 3:document.body.style.removeProperty("--seventv-chat-deleted-decoration"),document.body.style.removeProperty("--seventv-chat-deleted-opacity");break}},options:[["Hidden",0],["Dimmed",1],["Strikethrough",2],["Keep",3]],defaultValue:1}),D("chat.timestamp_with_seconds","TOGGLE",{path:["Chat","Style"],label:"Timestamp Seconds",hint:"If checked, timestamps in chat will also show seconds",defaultValue:!1}),D("chat.copy_icon_toggle","TOGGLE",{path:["Chat","Message Tools"],label:"Copy Icon",hint:"Show a 'Copy' icon when hovering over a chat message to copy the message",defaultValue:!0}),D("highlights.basic.mention","TOGGLE",{path:["Highlights","Built-In"],label:"Show Mention Highlights",hint:"Whether or not to highlight messages that mention or reply to you in chat",defaultValue:!0}),D("highlights.basic.mention_sound","TOGGLE",{path:["Highlights","Built-In"],label:"Play Sound on Mention",hint:"Play a sound when you are mentioned in chat",disabledIf:()=>!K("highlights.basic.mention").value,defaultValue:!1}),D("highlights.basic.mention_title_flash","TOGGLE",{path:["Highlights","Built-In"],label:"Flash Title on Mention",hint:"When tabbed out, the username of users who mention you will flash in the title",disabledIf:()=>!K("highlights.basic.mention").value,defaultValue:!0}),D("highlights.basic.first_time_chatter","TOGGLE",{path:["Highlights","Built-In"],label:"Show First-Time Chatter Highlights",hint:"Whether or not to highlight users who are chatting for the first time",defaultValue:!0}),D("highlights.custom","CUSTOM",{path:["Highlights",""],custom:{component:Qe(Ja),gridMode:"new-row"},label:"Custom Highlights",hint:"Create custom highlights for specific words or phrases",defaultValue:new Map}),D("highlights.sound_volume","SLIDER",{path:["Highlights","Built-In"],label:"Highlight Sound Volume",hint:"Control the volume at which sound plays upon being mentioned",options:{min:0,max:100,step:1,unit:"%"},defaultValue:75}),D("highlights.display_style","DROPDOWN",{path:["Highlights","Style"],label:"Highlighted Message Style",hint:"Choose how or if, to show highlighted messages in chat",options:[["Standard",0],["Minimal (Solid color)",1],["None (No visual)",2]],defaultValue:0}),D("highlights.opacity","SLIDER",{path:["Highlights","Style"],label:"Highlight Opacity",hint:"Change how bright highlights apear in chat",options:{min:0,max:100,step:1},defaultValue:10}),D("vanity.nametag_paints","TOGGLE",{path:["Appearance","Vanity"],label:"Nametag Paints",hint:"Whether or not to display nametag paints",defaultValue:!0})],Qa=F({__name:"ChatModule",setup(e,{expose:s}){const{dependenciesMet:o,markAsReady:h}=Dt("chat",{name:"Chat",depends_on:[]}),i=oe(new WeakMap),C=pe({parentSelector:".chat-room__content",maxDepth:100,predicate:v=>{var M;return((M=v.props)==null?void 0:M.primaryColorHex)!==void 0}}),_=pe({parentSelector:".chat-room__content",maxDepth:100,predicate:v=>v.scrollRef},{trackRoot:!0,hooks:{render:function(v){return v.component.props.children.map(T=>T.key?Et(v,T.key,T):null)}}}),b=pe({parentSelector:".chat-shell, .stream-chat",maxDepth:250,predicate:v=>{var M;return v.pushMessage&&((M=v.props)==null?void 0:M.messageHandlerAPI)}},{hooks:{update(v){i.set(v,!!v.component.props.channelID)}}}),f=pe({parentSelector:".stream-chat",maxDepth:250,predicate:v=>v.prependHistoricalMessages&&v.buffer&&v.blockedUsers}),k=pe({parentSelector:".stream-chat",maxDepth:250,predicate:v=>v.onClearChatEvent}),S=R(!1),P=Pe(S,200);return j(()=>[b.instances,b.instances],([v,M])=>S.value=v.length===M.length,{immediate:!0}),h(),s({chatController:b,chatList:_,chatRoom:C,messageSendMiddleware:new Map}),(v,M)=>(u(!0),m(X,null,we(w(b).instances,(T,z)=>(u(),m(X,{key:T.identifier},[w(o)&&w(P)&&i.get(T)?(u(),Y(Ca,{key:0,list:w(_).instances[0]??void 0,controller:w(b).instances[z],room:w(C).instances[0]??void 0,buffer:w(f).instances[0]??void 0,events:w(k).instances[0]??void 0},null,8,["list","controller","room","buffer","events"])):G("",!0)],64))),128))}}),bo=Object.freeze(Object.defineProperty({__proto__:null,config:Za,default:Qa},Symbol.toStringTag,{value:"Module"}));export{bo as _};
