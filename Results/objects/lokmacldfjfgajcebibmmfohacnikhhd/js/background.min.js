"use strict";browser.runtime.onInstalled.addListener(function(){browser.declarativeContent.onPageChanged.removeRules(void 0,function(){browser.declarativeContent.onPageChanged.addRules([{conditions:[new browser.declarativeContent.PageStateMatcher({pageUrl:{urlContains:"draftkings.co"}})],actions:[new browser.declarativeContent.ShowPageAction]}])})}),browser.runtime.onMessage.addListener(function(e,r){"signIn"==e.cmd&&$.post("https://api.rotogrinders.com/auth-external?key=GgcaLQMjLPw0tO1bCnG5oWbGvnkAqaYj",{username:e.user,password:e.pass},function(e,r){if("success"===r){var t=Object.keys(e);if(null===t||"errors"===t[0])window.alert("Error signing into RotoGrinders. Please try again."),browser.storage.sync.set({premiumNfl:!1,premiumMlb:!1,premiumNba:!1,premiumNhl:!1,premiumGolf:!1,premiumMma:!1,premiumCbb:!1,premiumCfb:!1,premiumTen:!1});else if("data"===t[0]){window.alert("Successfully signed in. If you are a DraftKings Premium subscriber you will see RotoGrinders Premium content while signed into this extension.");var n=e.data.results.user_products,d=new Date,o=new Date(d.toLocaleString("en-US",{timeZone:"America/New_York"}));n.forEach(function(e){(500===e.product.id&&new Date(e.end)>o||501===e.product.id&&new Date(e.end)>o||900===e.product.id&&new Date(e.end)>o)&&browser.storage.sync.set({premiumNfl:!0}),(500===e.product.id&&new Date(e.end)>o||502===e.product.id&&new Date(e.end)>o||900===e.product.id&&new Date(e.end)>o)&&browser.storage.sync.set({premiumMlb:!0}),(500===e.product.id&&new Date(e.end)>o||503===e.product.id&&new Date(e.end)>o||900===e.product.id&&new Date(e.end)>o)&&browser.storage.sync.set({premiumNba:!0}),(500===e.product.id&&new Date(e.end)>o||506===e.product.id&&new Date(e.end)>o||900===e.product.id&&new Date(e.end)>o)&&browser.storage.sync.set({premiumGolf:!0}),(400===e.product.id&&new Date(e.end)>o||504===e.product.id&&new Date(e.end)>o||900===e.product.id&&new Date(e.end)>o)&&browser.storage.sync.set({premiumNhl:!0}),(400===e.product.id&&new Date(e.end)>o||337===e.product.id&&new Date(e.end)>o||900===e.product.id&&new Date(e.end)>o)&&browser.storage.sync.set({premiumMma:!0}),(400===e.product.id&&new Date(e.end)>o||516===e.product.id&&new Date(e.end)>o||900===e.product.id&&new Date(e.end)>o)&&browser.storage.sync.set({premiumCbb:!0}),(400===e.product.id&&new Date(e.end)>o||517===e.product.id&&new Date(e.end)>o||900===e.product.id&&new Date(e.end)>o)&&browser.storage.sync.set({premiumCfb:!0}),(400===e.product.id&&new Date(e.end)>o||522===e.product.id&&new Date(e.end)>o||900===e.product.id&&new Date(e.end)>o)&&browser.storage.sync.set({premiumTen:!0})})}}})});