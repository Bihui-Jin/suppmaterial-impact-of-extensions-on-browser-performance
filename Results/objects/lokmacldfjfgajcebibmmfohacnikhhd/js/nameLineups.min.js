"use strict";function addToSavedList(){$("div.lineup").filter(function(){return"lineup complete show"!==$(this).get(0).className}).each(function(){var e=[],t=$(this).find("div.top h2").text().split("-")[0];e.push(t),e.push($(this).find(".lineup-name").val()),$(this).find("tbody tr").each(function(){e.push($(this).attr("data-pid"))}),e.unshift(e.length+1),saveName(e)})}function deleteOldLineupNames(){if(null!==savedIds){var e=Object.keys(allLineups);if(0===e.length)return savedNames=[],savedIds=[],localStorage.setItem("storedLineupnames",null),void localStorage.setItem("storedLineupids",null);for(var t=0;null!==savedIds&&t<savedIds.length;)e.includes(savedIds[t])?t++:(savedNames.splice(2*t,2),savedIds.splice(t,1),localStorage.setItem("storedLineupnames",JSON.stringify(savedNames)),localStorage.setItem("storedLineupids",JSON.stringify(savedIds)))}}function displayClearNamesBtnNew(){if($("div#third-party-controls").length){var e=document.getElementById("third-party-controls"),t=void 0,a=void 0;$(".Filters_rg-container").length?a=document.getElementsByClassName("Filters_rg-global-options")[0]:(t=document.createElement("div"),t.setAttribute("class","Filters_rg-container"),$(t).css({padding:"8px 0"}),$(t).insertAfter(e),a=document.createElement("div"),a.setAttribute("class","Filters_rg-global-options"),$(a).css({display:"inline-block"}),$(".Filters_rg-container").append(a));var s=document.createElement("div");s.setAttribute("class","lu-names-bar"),$(s).appendTo($(a)),$(".lu-names-bar").css({display:"inline-block",padding:"8px 0"}),$('<a href="#" class="_3jc_jKgc5R0NukZ4kiMZRA _2rZrW5P2i7coVrZve0MP0- _3thDCX4ICx4WvvhZta4U9F clear-names">Clear Lineup Names</a>').appendTo($(s)),$(".clear-names").css({"background-color":"#53d337",font:"700 14px Open Sans Condensed,sans-serif","line-height":"normal",padding:"4px 15px","margin-right":"8px"}),$(".clear-names").on("click",function(){$(".lineup-name").each(function(){$(this).val("")}),savedNames=[],savedIds=[],localStorage.setItem("storedLineupnames",null),localStorage.setItem("storedLineupids",null)}),$("input[name=lineup-type]").on("change",function(){setTimeout(function(){displayNameBoxesNew()},2e3)}),$("input.player-search").on("input",function(){displayNameBoxesNew()}),$("input.player-search").parent().on("click","span, ul",function(){displayNameBoxesNew()}),$("#third-party-controls").parent().on("click",".legacy",function(){setTimeout(function(){displayNameBoxesNew()},2e3)}),document.addEventListener("dk-public-data-ready",function(){allLineups=getAllLineups(),Object.keys(allLineups).length&&waitForUpdatedLineupData()}),allLineups=getAllLineups(),waitForInitialCardNameBoxesNew(),watchForNameChangesNew()}else setTimeout(function(){displayClearNamesBtnNew()},2e3)}function displayClearNamesBtn(){var e=document.getElementsByClassName("green-filter-bar")[0],t=document.createElement("div");t.setAttribute("class","lu-names-bar"),$("div.game-types-bar").length?$(t).insertAfter($("div.game-types-bar")):$(t).insertAfter(e),$('<a href="#" class="dk-btn clear-names">Clear Lineup Names</a>').appendTo($(t)),$(".lu-names-bar").css({padding:"15px 20px 0"}),$(".clear-names").css({"background-color":"#f98c13"}),watchForNameChanges()}function displayNameBoxesNew(){if($("div._3nS8S2r3CsF74wAmdnqQmA").length)$("div._3nS8S2r3CsF74wAmdnqQmA").each(function(){insertTextBoxNew(this)}),getSavedLineupsNew();else{if($(".ReactVirtualized__List span").length&&-1!==$(".ReactVirtualized__List span").text().indexOf("You currently do not have any"))return;setTimeout(function(){displayNameBoxesNew()},1e3)}}function displayTextBoxes(){$("div.lineup").filter(function(){return"lineup complete show"!==$(this).get(0).className}).each(function(){insertTextBox(this)})}function getSavedLineupsNew(){if(null!==savedNames)for(var e=0;e<savedNames.length;){var t=savedNames.slice(e,e+2);setMatchingNameNew(t),e+=2}}function getSavedLineups(){if(savedNames.length>0)for(var e=0;e<savedNames.length;){var t=savedNames[e],a=savedNames.slice(e,e+t);setMatchingName(a),e+=t}}function hasLineupStatusChanged(e,t,a){var s=!1;return prevNewTot===e&&prevUpcomingTot===t&&prevLiveTot===a||(s=!0),prevNewTot=e,prevUpcomingTot=t,prevLiveTot=a,s}function insertTextBoxNew(e){void 0===$(e).find(".lineup-name").val()&&$(e).find("div").eq(0).append('<span><input type="text" class="lineup-name" placeholder="Lineup Name" size="18" maxlength="20"></span>'),$(".lineup-name").css({margin:"0 0 0 8px"})}function insertTextBox(e){void 0===$(e).find(".lineup-name").val()&&$(e).find("thead td:nth-child(2)").append('<label>LU:<input type="text" class="lineup-name" size="11" maxlength="20"></label>'),$("thead td input").css({margin:"0px"}),$("thead td input").css({"line-height":"1.2em"}),$("thead td label").css({margin:"0 0 0 6px"})}function letCardNameBoxesRegenerate(e,t){var a=sumLineupStatus();if(hasLineupStatusChanged(a.newTotal,a.upcomingTotal,a.liveTotal),"global"===e)displayTextBoxes(),getSavedLineups(),updateSavedList("delete",t),addToSavedList();else if("export"===e)updateSavedList("delete",t);else if("new"===e)displayTextBoxes(),getSavedLineups(),addToSavedList();else if("edit_single"===e){displayTextBoxes(),getSavedLineups(),updateSavedList("modify",t);var s=savedNames.length;if(addToSavedList(),null!==luCardName&&savedNames.length>s){savedNames[s+2]=luCardName,localStorage.setItem("storedNames",JSON.stringify(savedNames));var i=savedNames.slice(s);setMatchingName(i)}luCardName=null,luCardSport=null}watchForNameChanges()}function saveName(e){if(0===savedNames.length)localStorage.setItem("storedNames",JSON.stringify(e)),$.merge(savedNames,e);else{var t=!1,a=0,s=void 0;for(a;!t&&a<savedNames.length;a+=s)if(s=savedNames[a],savedNames[a+1]===e[1]){for(var i=a+3,n=s-3+i;i<n&&-1!==$.inArray(savedNames[i],e,3);)i++;i===n&&(t=!0,savedNames[a+2]!==e[2]&&(savedNames[a+2]=e[2],localStorage.setItem("storedNames",JSON.stringify(savedNames))))}t||($.merge(savedNames,e),localStorage.setItem("storedNames",JSON.stringify(savedNames)))}}function scanExistingLineupsNew(e,t,a){var s=!1,i=0,n=0;return"Upcoming"===$("input[name=lineup-type]:checked").val()&&$("div.ReactVirtualized__Table").parent().filter(function(){return $(this).find(".CDR1ZxQX2ZSv-k1OldAaF").text().split(" ")[0]===t[1]}).each(function(){if(i++,$(this).find(".ReactVirtualized__Table__row").each(function(){var e=$(this).find("._3Lq5HRFohPaV7Euqe8UxKA").attr("data-pid");if(-1===$.inArray(e,t,3))return n++,!1}),n<i)return!1}),n===i&&("delete"===a?(s=!0,savedNames.splice(e,t[0]),localStorage.setItem("storedNames",JSON.stringify(savedNames))):"modify"===a&&(luCardName=t[2],luCardSport=t[1].split("-")[0],s=!0,savedNames.splice(e,t[0]),localStorage.setItem("storedNames",JSON.stringify(savedNames)))),s}function scanExistingLineups(e,t,a){var s=!1,i=0,n=0;return $("div.lineup").filter(function(){var e=$(this).get(0).className,a=$(this).find("div.top h2").text().split("-")[0];return"lineup complete show"!==e&&a===t[1]}).each(function(){if(i++,$(this).find("tbody tr").each(function(){var e=$(this).attr("data-pid");if(-1===$.inArray(e,t,3))return n++,!1}),n<i)return!1}),n===i&&("delete"===a?(s=!0,savedNames.splice(e,t[0]),localStorage.setItem("storedNames",JSON.stringify(savedNames))):"modify"===a&&(luCardName=t[2],luCardSport=t[1].split("-")[0],s=!0,savedNames.splice(e,t[0]),localStorage.setItem("storedNames",JSON.stringify(savedNames)))),s}function setMatchingNameNew(e){$("div.ReactVirtualized__Table").parent().each(function(){if($(this).attr("data-lineupid")===e[0])return void $(this).find(".lineup-name").val(e[1])})}function setMatchingName(e){$("div.lineup").filter(function(){return"lineup complete show"!==$(this).get(0).className}).each(function(){var t=!0;$(this).find("tbody tr").each(function(){var a=$(this).attr("data-pid");if(-1===$.inArray(a,e,3))return t=!1,!1}),t&&$(this).find(".lineup-name").val(e[2])})}function sumLineupStatus(){var e=0,t=0,a=0;return $("div.lineup.new").each(function(){e++}),$("div.lineup.upcoming").each(function(){t++}),$("div.lineup.live").each(function(){a++}),{newTotal:e,upcomingTotal:t,liveTotal:a}}function updateSavedList(e,t){var a=!1;if(savedNames.length>0)for(var s=0;s<savedNames.length&&!a;){var i=savedNames[s],n=savedNames.slice(s,s+i);if("lineups"===page){var d=scanExistingLineupsNew(s,n,e);d?"modify"===e&&t===luCardSport&&(a=!0):s+=i}else{var d=scanExistingLineups(s,n,e);d?"modify"===e&&t===luCardSport&&(a=!0):s+=i}}}function waitForInitialCardNameBoxesNew(){if($("div.ReactVirtualized__Table").parent().length)displayNameBoxesNew(),deleteOldLineupNames();else{if($(".ReactVirtualized__List span").length&&-1!==$(".ReactVirtualized__List span").text().indexOf("You currently do not have any"))return;setTimeout(function(){waitForInitialCardNameBoxesNew()},1e3)}}function waitForRefreshedCardNameBoxesNew(){$("[data-test-id=lineup-editor]").length?setTimeout(function(){waitForRefreshedCardNameBoxesNew()},2e3):setTimeout(function(){watchForNameChangesNew()},2e3)}function waitForRefreshedCardNameBoxes(e,t){$("div.popdown.new-lineup-panel.new").each(function(){e="new"}),$("div.popdown.global-player-swap-panel.complete").each(function(){e="global",t=$(this).find("select.contest-type-filter option:selected").text()}),$(".dkjs-editor").each(function(){e="edit_single",t=$(this).find(".EditLineup_sport-name").text()}),$("div.popdown.export-panel").each(function(){e="export",t=$(this).find("div.top h2").text()}),"block"===$("div.popdown").css("display")?setTimeout(function(){waitForRefreshedCardNameBoxes(e,t)},2e3):setTimeout(function(){letCardNameBoxesRegenerate(e,t)},2e3)}function waitForUpdatedLineupData(){$("[data-test-id=lineup-editor]").length?setTimeout(function(){waitForUpdatedLineupData()},1e3):(displayNameBoxesNew(),deleteOldLineupNames())}function watchForExistingLineupsModal(){null!==document.querySelector("#contest-details-pop, #h2h-modal")&&$(".mini-lineup-card").each(function(){var e=$(this).attr("data-lineup");if(-1!==savedIds.indexOf(e)){var t=2*savedIds.indexOf(e)+1;if(!$(this).find(".rg-name-copy").length){var a=document.createElement("span");a.setAttribute("class","rg-name-copy"),$(a).css({"margin-left":"5px",color:"#f3b700"}),$(a).appendTo($(this).find("label").eq(0))}$(this).find(".rg-name-copy").text(""+savedNames[t])}}),setTimeout(function(){watchForExistingLineupsModal()},2e3)}function watchForNameChangesNew(){$(".lineup-name").blur(function(){var e=$(this).closest("._2W517QJsMbQb1rHyOPqUoJ").attr("data-lineupid"),t=$(this).val();if(null===savedIds)savedNames=[e,t],savedIds=[e];else if(-1!==savedIds.indexOf(e)){var a=2*savedIds.indexOf(e)+1;savedNames[a]=t}else savedNames.push(e,t),savedIds.push(e);localStorage.setItem("storedLineupnames",JSON.stringify(savedNames)),localStorage.setItem("storedLineupids",JSON.stringify(savedIds))}),$("[data-test-id=lineup-editor]").length?waitForCompletedEditsNew():setTimeout(function(){displayNameBoxesNew(),watchForNameChangesNew()},2e3)}function watchForNameChanges(){var e,t,a=!1;if($("div.popdown.new-lineup-panel.new").each(function(){a=!0,e="new",t=null}),$("div.popdown.global-player-swap-panel.complete").each(function(){a=!0,e="global",t=$(this).find("select.contest-type-filter option:selected").text()}),$(".dkjs-editor").each(function(){e="edit_single",t=$(this).find(".EditLineup_sport-name").text()}),$("div.popdown.export-panel").each(function(){e="export",t=$(this).find("div.top h2").text()}),$("div.bottom").filter(function(){return"lineup complete show"!==$(this).parent().get(0).className}).each(function(){"block"===$(this).find("div.popdown-arrow").css("display")&&(a=!0)}),$(".lineup-name").blur(function(){var e=[],t=$(this).closest("div").find(".top h2").text().split("-")[0];e.push(t),e.push($(this).val()),$(this).parents("table").find("tbody tr").each(function(){e.push($(this).attr("data-pid"))}),e.unshift(e.length+1),saveName(e)}),$(".clear-names").on("click",function(){if($(".lineup-name").each(function(){$(this).val("")}),savedNames.length>0){for(var e=0;e<savedNames.length;)savedNames[e+2]="",e+=savedNames[e];localStorage.setItem("storedNames",JSON.stringify(savedNames))}}),a)waitForRefreshedCardNameBoxes(e,t);else{var s=sumLineupStatus();hasLineupStatusChanged(s.newTotal,s.upcomingTotal,s.liveTotal)&&(displayTextBoxes(),getSavedLineups()),setTimeout(function(){watchForNameChanges()},2e3)}}var prevNewTot=void 0,prevUpcomingTot=void 0,prevLiveTot=void 0,savedNames=[],savedIds=[],luCardName=null,luCardSport=null,page="",allLineups=void 0,nameLineupsInit=function(){prevNewTot=0,prevUpcomingTot=0,prevLiveTot=0;var e=$(location).attr("href");-1!==e.indexOf("expOverride=true")?(page="lineupsLegacy",null!==JSON.parse(localStorage.getItem("storedNames"))&&(savedNames=JSON.parse(localStorage.getItem("storedNames"))),displayTextBoxes(),getSavedLineups(),updateSavedList("delete",null),addToSavedList(),displayClearNamesBtn()):-1!==e.indexOf("/lineup")?(page="lineups",null!==JSON.parse(localStorage.getItem("storedLineupnames"))&&(savedNames=JSON.parse(localStorage.getItem("storedLineupnames")),savedIds=JSON.parse(localStorage.getItem("storedLineupids"))),displayClearNamesBtnNew()):(page="lobby",null!==JSON.parse(localStorage.getItem("storedLineupnames"))&&(savedNames=JSON.parse(localStorage.getItem("storedLineupnames")),savedIds=JSON.parse(localStorage.getItem("storedLineupids"))),watchForExistingLineupsModal())};