let _status=0,_user={steamid:null,username:null},sum_items=0,user_items=[];function renderItems(){user_items.length>0&&($(".items-block").find(".empty-items").hide(),$(".items-block").find(".items-list").show());const t=$(".slot-template");user_items.forEach((e=>{const s=t.clone(),a="https://steamcommunity-a.akamaihd.net/economy/image/image_hash/96fx96f".replace("image_hash",e.steam_icon_url_large);s.removeClass("slot-template"),s.attr("data-id",e.id),$(s.find(".item-name")).text(e.steam_market_hash_name),$(s.find(".item-state")).text(e.state),$(s.find(".item-rarity")).addClass(e.steam_rarity.toLowerCase()),$(s.find(".item-price")).text(`$ ${e.price}`),$(s.find("img")).attr("src",a),s.show(),0===$(`.slot[data-id=${e.id}]`).length&&$(".items-block").find(".items-slots").prepend(s)}))}_status_text_hash={0:"loading...",1:"ready",2:"not signed into steamcommunity",3:"not signed into shadowpay.com",4:"not signed into steamcommunity and shadowpay.com",5:"invalid steam account on steamcommunity"},_render=function(){const t=_status_text_hash.hasOwnProperty(_status)?_status_text_hash[_status]:"invalid status!";$(".user-status .status-text").text(t),$("#status").text(_status),$(".total-cost").text(sum_items.toFixed(2)),$(".user-status").removeClass("ready").removeClass("error").removeClass("info"),0==_status&&$(".user-status").addClass("info"),1==_status&&$(".user-status").addClass("ready"),_status>1&&$(".user-status").addClass("error"),1==_status?($("#logged").show(),$("#sign_in").hide(),_user.steamid&&($(".user-steamid").text(_user.steamid),$(".user-name").text(_user.name),$(".user-avatar img").attr("src",_user.avatar))):($("#logged").hide(),$("#sign_in").show(),2==_status&&($(".shadowpay").hide(),$(".steam").show()),3==_status&&($(".shadowpay").show(),$(".steam").hide())),renderItems()},_refresh_ui=function(){chrome.runtime.sendMessage({type:2},(t=>{void 0!==t.status&&(_status=t.status,_user=t.user,user_items=t.user_items,sum_items=t.sum_items),_render()}))},_refresh_ui(),$(document).ready((()=>{$(".settings-switch input[type=checkbox]").on("change",updateSettingsInBack),$("#login-button").on("click",(function(t){t.preventDefault(),chrome.tabs.create({url:config.host})}))}));const updateSettingsInBack=function(){const t={chrome_notification:$("#chrome_notification").prop("checked"),chrome_sound_notification:$("#chrome_sound_notification").prop("checked"),redirect_to_timer:$("#redirect_to_timer").prop("checked"),ext_auto_accept:$("#ext_auto_accept").prop("checked")};chrome.runtime.sendMessage({type:13,user_settings:t})},updateUserSettingsView=function(t){for(let e in t){if(!t.hasOwnProperty(e))continue;let s=t[e];$(`#${e}`).prop("checked",s)}};chrome.runtime.onMessage.addListener(((t,e,s)=>(console.log(t,e),13===t.type&&updateUserSettingsView(t.user_settings),!0)));