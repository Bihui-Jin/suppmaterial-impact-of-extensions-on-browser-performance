library(Hmisc)
library(dplyr)
library(nlme)                    # Fit Gaussian linear and nonlinear mixed-effects models
library(lme4)                    # Fit linear and generalized linear mixed-effects models
library(lattice)                 # Data visualization system
library(optimx)
library(car)
library(glmnet)
library(caret)
library(forcats)

Sys.setenv('R_MAX_VSIZE'=31000000000)
# # time
modelt <- readRDS('xxxxxx/page load time.rds')
# replace the output from helper.ipynb with the content after results <-
resultt <- resamples(list('2' = modelt[[2]],'3' = modelt[[3]],'6' = modelt[[6]],'13' = modelt[[13]],'14' = modelt[[14]],'15' = modelt[[15]],'16' = modelt[[16]],'17' = modelt[[17]],'19' = modelt[[19]],'23' = modelt[[23]],'25' = modelt[[25]],'26' = modelt[[26]],'28' = modelt[[28]],'30' = modelt[[30]],'32' = modelt[[32]],'33' = modelt[[33]],'34' = modelt[[34]],'36' = modelt[[36]],'37' = modelt[[37]],'38' = modelt[[38]],'40' = modelt[[40]],'41' = modelt[[41]],'42' = modelt[[42]],'43' = modelt[[43]],'44' = modelt[[44]],'45' = modelt[[45]],'46' = modelt[[46]],'47' = modelt[[47]],'48' = modelt[[48]],'49' = modelt[[49]],'50' = modelt[[50]],'51' = modelt[[51]],'52' = modelt[[52]],'53' = modelt[[53]],'54' = modelt[[54]],'56' = modelt[[56]],'59' = modelt[[59]],'60' = modelt[[60]],'61' = modelt[[61]],'62' = modelt[[62]],'63' = modelt[[63]],'64' = modelt[[64]],'65' = modelt[[65]],'67' = modelt[[67]],'68' = modelt[[68]],'69' = modelt[[69]],'70' = modelt[[70]],'71' = modelt[[71]],'72' = modelt[[72]],'73' = modelt[[73]],'74' = modelt[[74]],'75' = modelt[[75]],'76' = modelt[[76]],'77' = modelt[[77]],'78' = modelt[[78]],'79' = modelt[[79]],'80' = modelt[[80]],'81' = modelt[[81]],'82' = modelt[[82]],'83' = modelt[[83]],'84' = modelt[[84]],'85' = modelt[[85]],'86' = modelt[[86]],'87' = modelt[[87]],'88' = modelt[[88]],'89' = modelt[[89]],'90' = modelt[[90]],'91' = modelt[[91]],'92' = modelt[[92]],'93' = modelt[[93]],'94' = modelt[[94]],'95' = modelt[[95]],'96' = modelt[[96]],'97' = modelt[[97]],'98' = modelt[[98]],'99' = modelt[[99]],'100' = modelt[[100]],'101' = modelt[[101]],'102' = modelt[[102]],'103' = modelt[[103]],'104' = modelt[[104]],'105' = modelt[[105]],'106' = modelt[[106]],'107' = modelt[[107]],'108' = modelt[[108]],'109' = modelt[[109]],'110' = modelt[[110]],'111' = modelt[[111]],'112' = modelt[[112]],'113' = modelt[[113]],'114' = modelt[[114]],'115' = modelt[[115]],'116' = modelt[[116]],'117' = modelt[[117]],'118' = modelt[[118]],'119' = modelt[[119]],'120' = modelt[[120]],'121' = modelt[[121]],'122' = modelt[[122]],'123' = modelt[[123]],'124' = modelt[[124]],'125' = modelt[[125]],'126' = modelt[[126]],'127' = modelt[[127]],'128' = modelt[[128]],'129' = modelt[[129]],'130' = modelt[[130]],'131' = modelt[[131]],'132' = modelt[[132]],'133' = modelt[[133]],'134' = modelt[[134]],'135' = modelt[[135]],'136' = modelt[[136]],'137' = modelt[[137]],'138' = modelt[[138]],'139' = modelt[[139]],'140' = modelt[[140]],'141' = modelt[[141]],'142' = modelt[[142]],'143' = modelt[[143]],'144' = modelt[[144]],'145' = modelt[[145]],'146' = modelt[[146]],'147' = modelt[[147]],'148' = modelt[[148]],'149' = modelt[[149]],'150' = modelt[[150]],'151' = modelt[[151]],'152' = modelt[[152]],'153' = modelt[[153]],'154' = modelt[[154]],'155' = modelt[[155]],
                          '156' = modelt[[156]],'157' = modelt[[157]],'158' = modelt[[158]],'159' = modelt[[159]],'160' = modelt[[160]],'161' = modelt[[161]],'162' = modelt[[162]],'163' = modelt[[163]],'164' = modelt[[164]],'165' = modelt[[165]],'166' = modelt[[166]],'167' = modelt[[167]],'168' = modelt[[168]],'169' = modelt[[169]],'170' = modelt[[170]],'171' = modelt[[171]],'172' = modelt[[172]],'173' = modelt[[173]],'174' = modelt[[174]],'175' = modelt[[175]],'176' = modelt[[176]],'177' = modelt[[177]],'178' = modelt[[178]],'179' = modelt[[179]],'180' = modelt[[180]],'181' = modelt[[181]],'182' = modelt[[182]],'183' = modelt[[183]],'184' = modelt[[184]],'185' = modelt[[185]],'186' = modelt[[186]],'187' = modelt[[187]],'188' = modelt[[188]],'189' = modelt[[189]],'190' = modelt[[190]],'191' = modelt[[191]],'192' = modelt[[192]],'193' = modelt[[193]],'194' = modelt[[194]],'195' = modelt[[195]],'196' = modelt[[196]],'197' = modelt[[197]],'198' = modelt[[198]],'199' = modelt[[199]],'200' = modelt[[200]],'201' = modelt[[201]],'202' = modelt[[202]],'203' = modelt[[203]],'204' = modelt[[204]],'205' = modelt[[205]],'206' = modelt[[206]],'207' = modelt[[207]],'208' = modelt[[208]],'209' = modelt[[209]],'210' = modelt[[210]],'211' = modelt[[211]],'212' = modelt[[212]],'213' = modelt[[213]],'214' = modelt[[214]],'215' = modelt[[215]],'216' = modelt[[216]],'217' = modelt[[217]],'218' = modelt[[218]],'219' = modelt[[219]],'220' = modelt[[220]],'221' = modelt[[221]],'222' = modelt[[222]],'223' = modelt[[223]],'224' = modelt[[224]],'225' = modelt[[225]],'226' = modelt[[226]],'227' = modelt[[227]],'228' = modelt[[228]],'229' = modelt[[229]],'230' = modelt[[230]],'231' = modelt[[231]],'232' = modelt[[232]],'233' = modelt[[233]],'234' = modelt[[234]],'235' = modelt[[235]],'236' = modelt[[236]],'237' = modelt[[237]],'238' = modelt[[238]],'239' = modelt[[239]],'240' = modelt[[240]],'241' = modelt[[241]],'242' = modelt[[242]],'243' = modelt[[243]],'244' = modelt[[244]],'245' = modelt[[245]],'246' = modelt[[246]],'247' = modelt[[247]],'248' = modelt[[248]],'249' = modelt[[249]],'250' = modelt[[250]],'251' = modelt[[251]],'252' = modelt[[252]],'253' = modelt[[253]],'254' = modelt[[254]],'255' = modelt[[255]],'256' = modelt[[256]],'257' = modelt[[257]],'258' = modelt[[258]],'259' = modelt[[259]],'260' = modelt[[260]],'261' = modelt[[261]],'262' = modelt[[262]],'263' = modelt[[263]],'264' = modelt[[264]],'265' = modelt[[265]],'266' = modelt[[266]],'267' = modelt[[267]],'268' = modelt[[268]],'269' = modelt[[269]],'270' = modelt[[270]],'271' = modelt[[271]],'272' = modelt[[272]],'273' = modelt[[273]],'274' = modelt[[274]],'275' = modelt[[275]],'276' = modelt[[276]],'277' = modelt[[277]],'278' = modelt[[278]],'279' = modelt[[279]],'280' = modelt[[280]],
                          '281' = modelt[[281]],'282' = modelt[[282]],'283' = modelt[[283]],'284' = modelt[[284]],'285' = modelt[[285]],'286' = modelt[[286]],'287' = modelt[[287]],'288' = modelt[[288]],'289' = modelt[[289]],'290' = modelt[[290]],'291' = modelt[[291]],'292' = modelt[[292]],'293' = modelt[[293]],'294' = modelt[[294]],'295' = modelt[[295]],'296' = modelt[[296]],'297' = modelt[[297]],'298' = modelt[[298]],'299' = modelt[[299]],'300' = modelt[[300]]))

# # loading
modell <- readRDS('xxxxxx/page load energy consumption.rds')
resultl <- resamples(list('2' = modell[[2]],'3' = modell[[3]],'4' = modell[[4]],'6' = modell[[6]],'7' = modell[[7]],'8' = modell[[8]],'9' = modell[[9]],'10' = modell[[10]],'11' = modell[[11]],'12' = modell[[12]],'13' = modell[[13]],'14' = modell[[14]],'15' = modell[[15]],'16' = modell[[16]],'17' = modell[[17]],'18' = modell[[18]],'19' = modell[[19]],'20' = modell[[20]],'21' = modell[[21]],'22' = modell[[22]],'23' = modell[[23]],'24' = modell[[24]],'25' = modell[[25]],'26' = modell[[26]],'27' = modell[[27]],'28' = modell[[28]],'29' = modell[[29]],'30' = modell[[30]],'31' = modell[[31]],'32' = modell[[32]],'33' = modell[[33]],'34' = modell[[34]],'35' = modell[[35]],'36' = modell[[36]],'37' = modell[[37]],'38' = modell[[38]],'39' = modell[[39]],'40' = modell[[40]],'41' = modell[[41]],'42' = modell[[42]],'43' = modell[[43]],'44' = modell[[44]],'45' = modell[[45]],'46' = modell[[46]],'47' = modell[[47]],'48' = modell[[48]],'49' = modell[[49]],'50' = modell[[50]],'51' = modell[[51]],'52' = modell[[52]],'53' = modell[[53]],'54' = modell[[54]],'55' = modell[[55]],'56' = modell[[56]],'57' = modell[[57]],'58' = modell[[58]],'59' = modell[[59]],'60' = modell[[60]],'61' = modell[[61]],'62' = modell[[62]],'63' = modell[[63]],'64' = modell[[64]],'65' = modell[[65]],'66' = modell[[66]],'67' = modell[[67]],'68' = modell[[68]],'69' = modell[[69]],'70' = modell[[70]],'71' = modell[[71]],'72' = modell[[72]],'73' = modell[[73]],'74' = modell[[74]],'75' = modell[[75]],'76' = modell[[76]],'77' = modell[[77]],'78' = modell[[78]],'79' = modell[[79]],'80' = modell[[80]],'81' = modell[[81]],'82' = modell[[82]],'83' = modell[[83]],'84' = modell[[84]],'85' = modell[[85]],'86' = modell[[86]],'87' = modell[[87]],'88' = modell[[88]],'89' = modell[[89]],'90' = modell[[90]],'91' = modell[[91]],'92' = modell[[92]],'93' = modell[[93]],'94' = modell[[94]],'95' = modell[[95]],'96' = modell[[96]],'97' = modell[[97]],'98' = modell[[98]],'99' = modell[[99]],'100' = modell[[100]],'101' = modell[[101]],'102' = modell[[102]],'103' = modell[[103]],'104' = modell[[104]],'105' = modell[[105]],'106' = modell[[106]],'107' = modell[[107]],'108' = modell[[108]],'109' = modell[[109]],'110' = modell[[110]],'111' = modell[[111]],'112' = modell[[112]],'113' = modell[[113]],'114' = modell[[114]],'115' = modell[[115]],'116' = modell[[116]],'117' = modell[[117]],'118' = modell[[118]],'119' = modell[[119]],'120' = modell[[120]],'121' = modell[[121]],'122' = modell[[122]],'123' = modell[[123]],'124' = modell[[124]],'125' = modell[[125]],'126' = modell[[126]],'127' = modell[[127]],'128' = modell[[128]],'129' = modell[[129]],'130' = modell[[130]],'131' = modell[[131]],'132' = modell[[132]],'133' = modell[[133]],'134' = modell[[134]],'135' = modell[[135]],'136' = modell[[136]],'137' = modell[[137]],
                          '138' = modell[[138]],'139' = modell[[139]],'140' = modell[[140]],'141' = modell[[141]],'142' = modell[[142]],'143' = modell[[143]],'144' = modell[[144]],'145' = modell[[145]],'146' = modell[[146]],'147' = modell[[147]],'148' = modell[[148]],'149' = modell[[149]],'150' = modell[[150]],'151' = modell[[151]],'152' = modell[[152]],'153' = modell[[153]],'154' = modell[[154]],'155' = modell[[155]],'156' = modell[[156]],'157' = modell[[157]],'158' = modell[[158]],'159' = modell[[159]],'160' = modell[[160]],'161' = modell[[161]],'162' = modell[[162]],'163' = modell[[163]],'164' = modell[[164]],'165' = modell[[165]],'166' = modell[[166]],'167' = modell[[167]],'168' = modell[[168]],'169' = modell[[169]],'170' = modell[[170]],'171' = modell[[171]],'172' = modell[[172]],'173' = modell[[173]],'174' = modell[[174]],'175' = modell[[175]],'176' = modell[[176]],'177' = modell[[177]],'178' = modell[[178]],'179' = modell[[179]],'180' = modell[[180]],'181' = modell[[181]],'182' = modell[[182]],'183' = modell[[183]],'184' = modell[[184]],'185' = modell[[185]],'186' = modell[[186]],'187' = modell[[187]],'188' = modell[[188]],'189' = modell[[189]],'190' = modell[[190]],'191' = modell[[191]],'192' = modell[[192]],'193' = modell[[193]],'194' = modell[[194]],'195' = modell[[195]],'196' = modell[[196]],'197' = modell[[197]],'198' = modell[[198]],'199' = modell[[199]],'200' = modell[[200]],'201' = modell[[201]],'202' = modell[[202]],'203' = modell[[203]],'204' = modell[[204]],'205' = modell[[205]],'206' = modell[[206]],'207' = modell[[207]],'208' = modell[[208]],'209' = modell[[209]],'210' = modell[[210]],'211' = modell[[211]],'212' = modell[[212]],'213' = modell[[213]],'214' = modell[[214]],'215' = modell[[215]],'216' = modell[[216]],'217' = modell[[217]],'218' = modell[[218]],'219' = modell[[219]],'220' = modell[[220]],'221' = modell[[221]],'222' = modell[[222]],'223' = modell[[223]],'224' = modell[[224]],'225' = modell[[225]],'226' = modell[[226]],'227' = modell[[227]],'228' = modell[[228]],'229' = modell[[229]],'230' = modell[[230]],'231' = modell[[231]],'232' = modell[[232]],'233' = modell[[233]],'234' = modell[[234]],'235' = modell[[235]],'236' = modell[[236]],'237' = modell[[237]],'238' = modell[[238]],'239' = modell[[239]],'240' = modell[[240]],'241' = modell[[241]],'242' = modell[[242]],'243' = modell[[243]],'244' = modell[[244]],'245' = modell[[245]],'246' = modell[[246]],'247' = modell[[247]],'248' = modell[[248]],'249' = modell[[249]],'250' = modell[[250]],'251' = modell[[251]],'252' = modell[[252]],'253' = modell[[253]],'254' = modell[[254]],'255' = modell[[255]],'256' = modell[[256]],'257' = modell[[257]],'258' = modell[[258]],'259' = modell[[259]],'260' = modell[[260]],'261' = modell[[261]],'262' = modell[[262]],
                          '263' = modell[[263]],'264' = modell[[264]],'265' = modell[[265]],'266' = modell[[266]],'267' = modell[[267]],'268' = modell[[268]],'269' = modell[[269]],'270' = modell[[270]],'271' = modell[[271]],'272' = modell[[272]],'273' = modell[[273]],'274' = modell[[274]],'275' = modell[[275]],'276' = modell[[276]],'277' = modell[[277]],'278' = modell[[278]],'279' = modell[[279]],'280' = modell[[280]],'281' = modell[[281]],'282' = modell[[282]],'283' = modell[[283]],'284' = modell[[284]],'285' = modell[[285]],'286' = modell[[286]],'287' = modell[[287]],'288' = modell[[288]],'289' = modell[[289]],'290' = modell[[290]],'291' = modell[[291]],'292' = modell[[292]],'293' = modell[[293]],'294' = modell[[294]],'295' = modell[[295]],'296' = modell[[296]],'297' = modell[[297]],'298' = modell[[298]],'299' = modell[[299]],'300' = modell[[300]]))

# # static
models <- readRDS('xxxxxx/stabilized energy consumption.rds')
results <- resamples(list('2' = models[[2]],'5' = models[[5]],'7' = models[[7]],'9' = models[[9]],'11' = models[[11]],'12' = models[[12]],'13' = models[[13]],'14' = models[[14]],'15' = models[[15]],'16' = models[[16]],'18' = models[[18]],'19' = models[[19]],'20' = models[[20]],'21' = models[[21]],'22' = models[[22]],'23' = models[[23]],'24' = models[[24]],'25' = models[[25]],'26' = models[[26]],'27' = models[[27]],'28' = models[[28]],'29' = models[[29]],'30' = models[[30]],'31' = models[[31]],'32' = models[[32]],'33' = models[[33]],'34' = models[[34]],'35' = models[[35]],'36' = models[[36]],'37' = models[[37]],'38' = models[[38]],'39' = models[[39]],'40' = models[[40]],'41' = models[[41]],'42' = models[[42]],'43' = models[[43]],'44' = models[[44]],'45' = models[[45]],'46' = models[[46]],'47' = models[[47]],'48' = models[[48]],'49' = models[[49]],'50' = models[[50]],'51' = models[[51]],'52' = models[[52]],'53' = models[[53]],'54' = models[[54]],'55' = models[[55]],'56' = models[[56]],'57' = models[[57]],'58' = models[[58]],'59' = models[[59]],'60' = models[[60]],'61' = models[[61]],'62' = models[[62]],'63' = models[[63]],'64' = models[[64]],'65' = models[[65]],'66' = models[[66]],'67' = models[[67]],'68' = models[[68]],'69' = models[[69]],'70' = models[[70]],'71' = models[[71]],'72' = models[[72]],'73' = models[[73]],'74' = models[[74]],'75' = models[[75]],'76' = models[[76]],'77' = models[[77]],'78' = models[[78]],'79' = models[[79]],'80' = models[[80]],'81' = models[[81]],'82' = models[[82]],'83' = models[[83]],'84' = models[[84]],'85' = models[[85]],'86' = models[[86]],'87' = models[[87]],'88' = models[[88]],'89' = models[[89]],'90' = models[[90]],'91' = models[[91]],'92' = models[[92]],'93' = models[[93]],'94' = models[[94]],'95' = models[[95]],'96' = models[[96]],'97' = models[[97]],'98' = models[[98]],'99' = models[[99]],'100' = models[[100]],'101' = models[[101]],'102' = models[[102]],'103' = models[[103]],'104' = models[[104]],'105' = models[[105]],'106' = models[[106]],'107' = models[[107]],'108' = models[[108]],'109' = models[[109]],'110' = models[[110]],'111' = models[[111]],'112' = models[[112]],'113' = models[[113]],'114' = models[[114]],'115' = models[[115]],'116' = models[[116]],'117' = models[[117]],'118' = models[[118]],'119' = models[[119]],'120' = models[[120]],'121' = models[[121]],'122' = models[[122]],'123' = models[[123]],'124' = models[[124]],'125' = models[[125]],'126' = models[[126]],'127' = models[[127]],'128' = models[[128]],'129' = models[[129]],'130' = models[[130]],'131' = models[[131]],'132' = models[[132]],'133' = models[[133]],'134' = models[[134]],'135' = models[[135]],'136' = models[[136]],'137' = models[[137]],'138' = models[[138]],'139' = models[[139]],'140' = models[[140]],'141' = models[[141]],
                          '142' = models[[142]],'143' = models[[143]],'144' = models[[144]],'145' = models[[145]],'146' = models[[146]],'147' = models[[147]],'148' = models[[148]],'149' = models[[149]],'150' = models[[150]],'151' = models[[151]],'152' = models[[152]],'153' = models[[153]],'154' = models[[154]],'155' = models[[155]],'156' = models[[156]],'157' = models[[157]],'158' = models[[158]],'159' = models[[159]],'160' = models[[160]],'161' = models[[161]],'162' = models[[162]],'163' = models[[163]],'164' = models[[164]],'165' = models[[165]],'166' = models[[166]],'167' = models[[167]],'168' = models[[168]],'169' = models[[169]],'170' = models[[170]],'171' = models[[171]],'172' = models[[172]],'173' = models[[173]],'174' = models[[174]],'175' = models[[175]],'176' = models[[176]],'177' = models[[177]],'178' = models[[178]],'179' = models[[179]],'180' = models[[180]],'181' = models[[181]],'182' = models[[182]],'183' = models[[183]],'184' = models[[184]],'185' = models[[185]],'186' = models[[186]],'187' = models[[187]],'188' = models[[188]],'189' = models[[189]],'190' = models[[190]],'191' = models[[191]],'192' = models[[192]],'193' = models[[193]],'194' = models[[194]],'195' = models[[195]],'196' = models[[196]],'197' = models[[197]],'198' = models[[198]],'199' = models[[199]],'200' = models[[200]],'201' = models[[201]],'202' = models[[202]],'203' = models[[203]],'204' = models[[204]],'205' = models[[205]],'206' = models[[206]],'207' = models[[207]],'208' = models[[208]],'209' = models[[209]],'210' = models[[210]],'211' = models[[211]],'212' = models[[212]],'213' = models[[213]],'214' = models[[214]],'215' = models[[215]],'216' = models[[216]],'217' = models[[217]],'218' = models[[218]],'219' = models[[219]],'220' = models[[220]],'221' = models[[221]],'222' = models[[222]],'223' = models[[223]],'224' = models[[224]],'225' = models[[225]],'226' = models[[226]],'227' = models[[227]],'228' = models[[228]],'229' = models[[229]],'230' = models[[230]],'231' = models[[231]],'232' = models[[232]],'233' = models[[233]],'234' = models[[234]],'235' = models[[235]],'236' = models[[236]],'237' = models[[237]],'238' = models[[238]],'239' = models[[239]],'240' = models[[240]],'241' = models[[241]],'242' = models[[242]],'243' = models[[243]],'244' = models[[244]],'245' = models[[245]],'246' = models[[246]],'247' = models[[247]],'248' = models[[248]],'249' = models[[249]],'250' = models[[250]],'251' = models[[251]],'252' = models[[252]],'253' = models[[253]],'254' = models[[254]],'255' = models[[255]],'256' = models[[256]],'257' = models[[257]],'258' = models[[258]],'259' = models[[259]],'260' = models[[260]],'261' = models[[261]],'262' = models[[262]],'263' = models[[263]],'264' = models[[264]],'265' = models[[265]],'266' = models[[266]],
                          '267' = models[[267]],'268' = models[[268]],'269' = models[[269]],'270' = models[[270]],'271' = models[[271]],'272' = models[[272]],'273' = models[[273]],'274' = models[[274]],'275' = models[[275]],'276' = models[[276]],'277' = models[[277]],'278' = models[[278]],'279' = models[[279]],'280' = models[[280]],'281' = models[[281]],'282' = models[[282]],'283' = models[[283]],'284' = models[[284]],'285' = models[[285]],'286' = models[[286]],'287' = models[[287]],'288' = models[[288]],'289' = models[[289]],'290' = models[[290]],'291' = models[[291]],'292' = models[[292]],'293' = models[[293]],'294' = models[[294]],'295' = models[[295]],'296' = models[[296]],'297' = models[[297]],'298' = models[[298]],'299' = models[[299]],'300' = models[[300]]))


# View the models with the lowest RMSE -> determine tuneLength
ggplot(resultt, metric = 'RMSE') + theme(axis.text.y = element_text(size=4.5))
ggplot(resultl, metric = 'RMSE') + theme(axis.text.y = element_text(size=4.5))
ggplot(results, metric = 'RMSE') + theme(axis.text.y = element_text(size=4.5))


# t2: the elastic net regression model (with the lowest RMSE) regarding page load energy consumption 
r2 <- modelt[[92]]
# List important factors
vip::vip(t2)
caret::varImp(t2)#$importance

coef(t2, t2$lambda.min)